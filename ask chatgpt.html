<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸ”¥ Blaze AI with OpenAI</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: url('https://i.pinimg.com/736x/a0/9f/d7/a09fd769b1c973ff30eae88d7a867b57.jpg') no-repeat center center fixed;
            background-size: cover;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
        }

        /* Add overlay for better readability */
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: -1;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 0.5s, visibility 0.5s;
        }

        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loading-logo {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            animation: pulse 2s infinite;
            overflow: hidden;
            background: white;
            padding: 10px;
        }

        .loading-logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 50%;
        }

        .loading-text {
            color: white;
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 30px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }

        .loading-bar {
            width: 300px;
            height: 8px;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            overflow: hidden;
        }

        .loading-progress {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #ff7e5f, #feb47b);
            border-radius: 4px;
            transition: width 0.3s;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* Chat Container */
        .chat-container {
            width: 100%;
            max-width: 900px;
            height: 90vh;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s, transform 0.5s;
        }

        .chat-container.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Theme variations */
        .chat-container.device-theme {
            background-color: rgba(255, 255, 255, 0.95);
        }

        .chat-container.white-theme {
            background-color: #ffffff;
        }

        .chat-container.black-theme {
            background-color: #1a1a1a;
            color: #ffffff;
        }

        .chat-container.black-theme .message-bubble {
            color: #ffffff;
        }

        .chat-container.black-theme .bot-message .message-bubble {
            background-color: #2d2d2d;
            color: #ffffff;
        }

        .chat-container.black-theme .user-message .message-bubble {
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            color: white;
        }

        .chat-container.black-theme .message-input {
            background-color: #2d2d2d;
            color: white;
            border-color: #444;
        }

        .chat-container.black-theme .chat-area {
            background-color: #1a1a1a;
        }

        .chat-container.black-theme .input-area {
            background-color: #2d2d2d;
            border-color: #444;
        }

        .chat-container.black-theme .code-container {
            background: #000000;
        }

        .brand-header {
            background: linear-gradient(90deg, #ff7e5f, #feb47b);
            padding: 15px 25px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .brand-left {
            display: flex;
            align-items: center;
        }

        .brand-logo {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .brand-logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .brand-name {
            font-size: 24px;
            font-weight: 700;
            color: white;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
            letter-spacing: 1px;
        }

        .brand-tagline {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 2px;
        }

        .header-actions {
            display: flex;
            position: relative;
        }

        .header-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-left: 10px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .header-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .header-btn.active {
            background: rgba(255, 255, 255, 0.4);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        /* API Key Input Modal */
        .api-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .api-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .api-modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            transform: translateY(-20px);
            transition: transform 0.3s;
        }

        .api-modal.show .api-modal-content {
            transform: translateY(0);
        }

        .api-modal h2 {
            color: #1a2a6c;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .api-modal p {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .api-input-group {
            margin-bottom: 20px;
        }

        .api-input-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 14px;
        }

        .api-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .api-input:focus {
            border-color: #4facfe;
            outline: none;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .api-input::placeholder {
            color: #999;
        }

        .api-modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }

        .api-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }

        .api-btn.primary {
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            color: white;
        }

        .api-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.4);
        }

        .api-btn.secondary {
            background: #f0f2f5;
            color: #666;
        }

        .api-btn.secondary:hover {
            background: #e0e2e5;
        }

        .api-status {
            padding: 10px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 13px;
            display: none;
        }

        .api-status.success {
            background: rgba(76, 175, 80, 0.1);
            color: #4caf50;
            display: block;
        }

        .api-status.error {
            background: rgba(244, 67, 54, 0.1);
            color: #f44336;
            display: block;
        }

        /* Message Us Button */
        .message-us-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            font-weight: 600;
            margin-left: 10px;
        }

        .message-us-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        /* Settings Dropdown */
        .settings-dropdown {
            position: absolute;
            top: 45px;
            right: 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            width: 280px;
            padding: 15px;
            z-index: 100;
            display: none;
            opacity: 0;
            transform: translateY(-10px);
            transition: opacity 0.3s, transform 0.3s;
        }

        .settings-dropdown.show {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .settings-dropdown h3 {
            margin-bottom: 15px;
            color: #333;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .settings-dropdown .setting-item {
            margin-bottom: 15px;
        }

        .settings-dropdown .setting-item label {
            display: block;
            margin-bottom: 5px;
            color: #666;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .volume-slider {
            width: 100%;
            height: 6px;
            -webkit-appearance: none;
            appearance: none;
            background: #e0e0e0;
            border-radius: 3px;
            outline: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #ff7e5f;
            cursor: pointer;
        }

        .theme-options {
            display: flex;
            gap: 10px;
            margin-top: 8px;
        }

        .theme-option {
            flex: 1;
            padding: 8px;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .theme-option:hover {
            transform: translateY(-2px);
        }

        .theme-option.active {
            border-color: #ff7e5f;
            background: rgba(255, 126, 95, 0.1);
        }

        .theme-option.device {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
        }

        .theme-option.white {
            background: #ffffff;
            color: #333;
            border: 1px solid #e0e0e0;
        }

        .theme-option.black {
            background: #1a1a1a;
            color: white;
        }

        .chat-area {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background-color: #f8f9fa;
        }

        .message {
            margin-bottom: 20px;
            display: flex;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .bot-message {
            justify-content: flex-start;
        }

        .user-message {
            justify-content: flex-end;
        }

        .message-bubble {
            max-width: 70%;
            padding: 15px 20px;
            border-radius: 18px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            line-height: 1.5;
            position: relative;
        }

        .bot-message .message-bubble {
            background-color: white;
            border-bottom-left-radius: 5px;
            color: #333;
        }

        .user-message .message-bubble {
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            color: white;
            border-bottom-right-radius: 5px;
        }

        .message-time {
            font-size: 11px;
            margin-top: 8px;
            opacity: 0.7;
            text-align: right;
        }

        .bot-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 12px;
            flex-shrink: 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .bot-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .input-area {
            padding: 20px;
            background-color: white;
            border-top: 1px solid #e0e0e0;
            display: flex;
            align-items: flex-end;
        }

        .message-input {
            flex: 1;
            padding: 15px 20px;
            border: 1px solid #e0e0e0;
            border-radius: 25px;
            background-color: #f8f9fa;
            font-size: 16px;
            outline: none;
            transition: all 0.3s;
            resize: none;
            height: 50px;
            max-height: 120px;
        }

        .message-input:focus {
            background-color: white;
            border-color: #4facfe;
            box-shadow: 0 0 0 2px rgba(79, 172, 254, 0.2);
        }

        .send-button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            border: none;
            margin-left: 10px;
            color: white;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }

        .send-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .send-button:active {
            transform: scale(0.98);
        }

        .voice-button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(90deg, #ff7e5f, #feb47b);
            border: none;
            margin-left: 10px;
            color: white;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }

        .voice-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .voice-button.listening {
            background: linear-gradient(90deg, #ff0000, #ff6600);
            animation: pulse 1.5s infinite;
        }

        .audio-toggle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            border: none;
            margin-left: 10px;
            color: white;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }

        .audio-toggle:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .audio-toggle.active {
            background: linear-gradient(90deg, #f44336, #ff9800);
            box-shadow: 0 0 15px rgba(244, 67, 54, 0.5);
        }

        .typing-indicator {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .typing-indicator.active {
            opacity: 1;
        }

        .typing-dots {
            display: flex;
            margin-left: 10px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background-color: #bbb;
            border-radius: 50%;
            margin: 0 2px;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) {
            animation-delay: -0.32s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes typing {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .welcome-message {
            text-align: center;
            margin: 20px 0 30px;
            color: #666;
            font-style: italic;
        }

        .suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }

        .suggestion-chip {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .suggestion-chip:hover {
            background: #f0f2f5;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .message-actions {
            display: flex;
            margin-top: 10px;
            gap: 10px;
        }

        .action-btn {
            background: rgba(79, 172, 254, 0.1);
            border: 1px solid rgba(79, 172, 254, 0.3);
            border-radius: 15px;
            padding: 5px 12px;
            font-size: 12px;
            color: #4facfe;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .action-btn:hover {
            background: rgba(79, 172, 254, 0.2);
        }

        .links-container {
            margin-top: 15px;
            padding: 15px;
            background: #f0f7ff;
            border-radius: 10px;
            border-left: 4px solid #4facfe;
        }

        .links-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .link-item {
            margin: 8px 0;
            padding: 8px;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .link-item:hover {
            background: rgba(79, 172, 254, 0.1);
        }

        .link-item a {
            color: #4facfe;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .link-item a:hover {
            text-decoration: underline;
        }

        .calculator-result {
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
        }

        .calculation {
            font-size: 18px;
            font-weight: bold;
            color: #4facfe;
            margin-bottom: 5px;
        }

        .result {
            font-size: 24px;
            font-weight: bold;
            color: #ff7e5f;
        }

        .code-container {
            background: #2d2d2d;
            color: #f8f8f2;
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            position: relative;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid #444;
        }

        .code-language {
            font-weight: bold;
            color: #ff7e5f;
        }

        .code-copy-btn {
            background: #4facfe;
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.3s;
        }

        .code-copy-btn:hover {
            background: #3a9ae8;
        }

        .code-copy-btn.copied {
            background: #4caf50;
        }

        .code-generator {
            margin-top: 15px;
            padding: 15px;
            background: #f0f7ff;
            border-radius: 10px;
            border-left: 4px solid #4facfe;
        }

        .code-generator-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .code-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }

        .code-option {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .code-option:hover {
            background: #f0f2f5;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .code-option.active {
            background: #4facfe;
            color: white;
            border-color: #4facfe;
        }

        .code-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 14px;
            resize: vertical;
            min-height: 80px;
        }

        .generate-code-btn {
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .generate-code-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        /* Chat History Sidebar */
        .chat-history {
            position: absolute;
            left: -300px;
            top: 0;
            width: 280px;
            height: 100%;
            background: white;
            box-shadow: 5px 0 15px rgba(0, 0, 0, 0.1);
            z-index: 50;
            transition: left 0.3s ease;
            border-radius: 20px 0 0 20px;
            display: flex;
            flex-direction: column;
        }

        .chat-history.active {
            left: 0;
        }

        .history-header {
            padding: 20px;
            background: linear-gradient(90deg, #ff7e5f, #feb47b);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .history-header h3 {
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .close-history {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.3s;
        }

        .close-history:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .history-list {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }

        .history-item {
            padding: 12px 15px;
            border-radius: 10px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.3s;
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
        }

        .history-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .history-item.active {
            background: linear-gradient(90deg, rgba(255, 126, 95, 0.1), rgba(254, 180, 123, 0.1));
            border-color: #ff7e5f;
        }

        .history-preview {
            font-size: 14px;
            color: #666;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 5px;
        }

        .history-time {
            font-size: 12px;
            color: #999;
            display: flex;
            justify-content: space-between;
        }

        .clear-history {
            padding: 15px;
            border-top: 1px solid #e0e0e0;
        }

        .clear-history-btn {
            width: 100%;
            padding: 10px;
            background: #ff7e5f;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .clear-history-btn:hover {
            background: #ff6b4a;
            transform: translateY(-2px);
        }

        /* History Toggle Button */
        .history-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-left: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .history-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        /* Enhanced Answer Styles */
        .enhanced-answer {
            margin: 15px 0;
            padding: 15px;
            background: linear-gradient(135deg, rgba(255, 126, 95, 0.1), rgba(254, 180, 123, 0.1));
            border-radius: 10px;
            border-left: 4px solid #ff7e5f;
        }

        .answer-section {
            margin-bottom: 15px;
        }

        .answer-title {
            font-weight: 600;
            color: #1a2a6c;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .answer-list {
            list-style: none;
            padding-left: 20px;
        }

        .answer-list li {
            margin-bottom: 6px;
            position: relative;
            padding-left: 20px;
        }

        .answer-list li:before {
            content: "â€¢";
            color: #ff7e5f;
            font-weight: bold;
            position: absolute;
            left: 0;
        }

        .note-box {
            background: rgba(79, 172, 254, 0.1);
            border: 1px solid rgba(79, 172, 254, 0.3);
            border-radius: 8px;
            padding: 12px;
            margin: 10px 0;
            font-size: 14px;
            color: #1a2a6c;
        }

        .note-box i {
            color: #4facfe;
            margin-right: 8px;
        }

        /* Knowledge tags */
        .knowledge-tag {
            display: inline-block;
            background: rgba(255, 126, 95, 0.1);
            color: #ff7e5f;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 12px;
            margin: 3px;
            border: 1px solid rgba(255, 126, 95, 0.3);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .chat-container {
                height: 95vh;
                border-radius: 15px;
            }
           
            .message-bubble {
                max-width: 85%;
            }
           
            .brand-name {
                font-size: 20px;
            }

            .suggestions {
                flex-direction: column;
            }
            
            .loading-bar {
                width: 250px;
            }

            .chat-history {
                width: 85%;
                left: -85%;
            }

            .settings-dropdown {
                width: 200px;
                right: -50px;
            }

            .message-us-btn span {
                display: none;
            }
            
            .message-us-btn {
                padding: 8px;
                width: 36px;
                height: 36px;
                justify-content: center;
            }
        }

        @media (max-width: 600px) {
            .header-actions {
                flex-wrap: wrap;
                justify-content: flex-end;
                gap: 5px;
            }
            
            .message-us-btn, .header-btn {
                margin-left: 5px;
                margin-bottom: 5px;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-logo">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTryYMGzMy67w29nF47tPjUC3HCipQOT_CLahwD11UzC9-rc90BdWRQ4RM&s" alt="Blaze AI Logo" id="loadingLogo">
        </div>
        <div class="loading-text">Blaze AI with OpenAI</div>
        <div class="loading-bar">
            <div class="loading-progress" id="loadingProgress"></div>
        </div>
    </div>

    <!-- API Key Modal -->
    <div class="api-modal" id="apiModal">
        <div class="api-modal-content">
            <h2><i class="fas fa-key"></i> OpenAI API Key Required</h2>
            <p>To use Blaze AI with OpenAI's powerful language model, please enter your OpenAI API key. This allows me to provide intelligent, detailed responses to any question.</p>
            
            <div class="api-input-group">
                <label for="apiKeyInput"><i class="fas fa-key"></i> Your OpenAI API Key</label>
                <input type="password" id="apiKeyInput" class="api-input" placeholder="sk-...">
                <div style="font-size: 12px; color: #666; margin-top: 5px;">
                    <i class="fas fa-info-circle"></i> Your key is stored locally and never sent to our servers
                </div>
            </div>
            
            <div class="api-input-group">
                <label><i class="fas fa-info-circle"></i> How to get an API key?</label>
                <div style="background: #f8f9fa; padding: 12px; border-radius: 8px; font-size: 13px;">
                    1. Go to <a href="https://platform.openai.com/api-keys" target="_blank">platform.openai.com/api-keys</a><br>
                    2. Sign in or create an account<br>
                    3. Click "Create new secret key"<br>
                    4. Copy and paste it here
                </div>
            </div>
            
            <div class="api-status" id="apiStatus"></div>
            
            <div class="api-modal-buttons">
                <button class="api-btn secondary" id="skipApiBtn">
                    <i class="fas fa-forward"></i> Use Basic Mode
                </button>
                <button class="api-btn primary" id="saveApiBtn">
                    <i class="fas fa-save"></i> Save & Continue
                </button>
            </div>
        </div>
    </div>

    <!-- Chat Container -->
    <div class="chat-container device-theme" id="chatContainer">
        <!-- Chat History Sidebar -->
        <div class="chat-history" id="chatHistory">
            <div class="history-header">
                <h3><i class="fas fa-history"></i> Chat History</h3>
                <button class="close-history" id="closeHistory">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="history-list" id="historyList">
                <!-- History items will be added dynamically -->
            </div>
            <div class="clear-history">
                <button class="clear-history-btn" id="clearHistoryBtn">
                    <i class="fas fa-trash"></i> Clear History
                </button>
            </div>
        </div>

        <div class="brand-header">
            <div class="brand-left">
                <button class="history-toggle" id="historyToggle" title="Chat History">
                    <i class="fas fa-history"></i>
                </button>
                <div class="brand-logo">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTryYMGzMy67w29nF47tPjUC3HCipQOT_CLahwD11UzC9-rc90BdWRQ4RM&s" alt="Blaze AI Logo" id="headerLogo">
                </div>
                <div>
                    <div class="brand-name">Blaze AI</div>
                    <div class="brand-tagline">Powered by OpenAI</div>
                </div>
            </div>
            <div class="header-actions">
                <!-- Message Us Button -->
                <button class="message-us-btn" id="messageUsBtn" title="Message Us">
                    <i class="fas fa-comment-alt"></i>
                    <span>Message Us</span>
                </button>
                
                <!-- API Key Button -->
                <button class="header-btn" title="API Settings" id="apiKeyBtn">
                    <i class="fas fa-key"></i>
                </button>
                
                <button class="header-btn" title="New Chat" id="newChatBtn">
                    <i class="fas fa-plus"></i>
                </button>
                <button class="header-btn" title="Audio Response" id="audioToggleBtn">
                    <i class="fas fa-volume-up"></i>
                </button>
                <button class="header-btn" title="Settings" id="settingsBtn">
                    <i class="fas fa-cog"></i>
                </button>
                
                <!-- Settings Dropdown -->
                <div class="settings-dropdown" id="settingsDropdown">
                    <h3><i class="fas fa-sliders-h"></i> Settings</h3>
                    
                    <div class="setting-item">
                        <label><i class="fas fa-volume-up"></i> Volume</label>
                        <input type="range" class="volume-slider" id="volumeSlider" min="0" max="1" step="0.1" value="0.8">
                    </div>
                    
                    <div class="setting-item">
                        <label><i class="fas fa-palette"></i> Theme</label>
                        <div class="theme-options">
                            <div class="theme-option device active" data-theme="device">
                                Device
                            </div>
                            <div class="theme-option white" data-theme="white">
                                White
                            </div>
                            <div class="theme-option black" data-theme="black">
                                Black
                            </div>
                        </div>
                    </div>
                    
                    <div class="setting-item">
                        <label><i class="fas fa-robot"></i> AI Model</label>
                        <div style="font-size: 12px; color: #888; margin-top: 5px;" id="modelInfo">
                            Loading...
                        </div>
                    </div>
                </div>
            </div>
        </div>
       
        <div class="chat-area" id="chatArea">
            <div class="welcome-message">
                Welcome to Blaze AI with OpenAI integration! Ask me anything and I'll provide intelligent, detailed responses.
                <div style="margin-top: 10px;">
                    <span class="knowledge-tag" id="modelStatus">Basic Mode</span>
                    <span class="knowledge-tag">ChatGPT</span>
                    <span class="knowledge-tag">Code Generation</span>
                    <span class="knowledge-tag">Voice Assistant</span>
                </div>
            </div>
           
            <div class="message bot-message">
                <div class="bot-avatar">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTryYMGzMy67w29nF47tPjUC3HCipQOT_CLahwD11UzC9-rc90BdWRQ4RM&s" alt="Blaze AI Avatar" id="botAvatar">
                </div>
                <div class="message-bubble">
                    <b>ðŸ§  Blaze AI:</b> Hello! I'm Blaze AI, now enhanced with OpenAI's powerful language model. 
                    
                    <div class="enhanced-answer">
                        <div class="answer-title">
                            <i class="fas fa-bolt"></i> Features with OpenAI
                        </div>
                        <ul class="answer-list">
                            <li>Intelligent responses on any topic</li>
                            <li>Code generation with explanations</li>
                            <li>Creative writing and brainstorming</li>
                            <li>Language translation and summarization</li>
                            <li>Problem solving and analysis</li>
                        </ul>
                    </div>
                    
                    <div class="note-box" id="apiNote">
                        <i class="fas fa-key"></i>
                        <strong>OpenAI API Required:</strong> Enter your API key in the key icon above to unlock full capabilities.
                    </div>
                   
                    <div class="code-generator">
                        <div class="code-generator-title">
                            <i class="fas fa-code"></i> Code Generator
                        </div>
                        <div class="code-options">
                            <div class="code-option active" data-lang="html">HTML</div>
                            <div class="code-option" data-lang="css">CSS</div>
                            <div class="code-option" data-lang="javascript">JavaScript</div>
                            <div class="code-option" data-lang="python">Python</div>
                            <div class="code-option" data-lang="java">Java</div>
                        </div>
                        <textarea class="code-input" id="codeInput" placeholder="Describe what you want to code (e.g., 'Create a responsive navigation bar')"></textarea>
                        <button class="generate-code-btn" id="generateCodeBtn">
                            <i class="fas fa-bolt"></i> Generate Code
                        </button>
                    </div>
                   
                    <div class="suggestions">
                        <div class="suggestion-chip">What is artificial intelligence?</div>
                        <div class="suggestion-chip">Explain quantum computing</div>
                        <div class="suggestion-chip">Create a Python calculator</div>
                        <div class="suggestion-chip">Tell me a story about space</div>
                    </div>
                   
                    <div class="message-time" id="currentTime"></div>
                </div>
            </div>
           
            <div class="typing-indicator" id="typingIndicator">
                <div class="bot-avatar">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTryYMGzMy67w29nF47tPjUC3HCipQOT_CLahwD11UzC9-rc90BdWRQ4RM&s" alt="Blaze AI Avatar" id="typingAvatar">
                </div>
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>
        </div>
       
        <div class="input-area">
            <textarea class="message-input" id="messageInput" placeholder="Ask me anything! Enter your OpenAI API key to unlock full capabilities." rows="1"></textarea>
            <button class="send-button" id="sendButton">
                <i class="fas fa-paper-plane"></i>
            </button>
            <button class="voice-button" id="voiceButton">
                <i class="fas fa-microphone"></i>
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const loadingScreen = document.getElementById('loadingScreen');
            const loadingProgress = document.getElementById('loadingProgress');
            const chatContainer = document.getElementById('chatContainer');
            const chatArea = document.getElementById('chatArea');
            const messageInput = document.getElementById('messageInput');
            const sendButton = document.getElementById('sendButton');
            const voiceButton = document.getElementById('voiceButton');
            const audioToggleBtn = document.getElementById('audioToggleBtn');
            const typingIndicator = document.getElementById('typingIndicator');
            const newChatBtn = document.getElementById('newChatBtn');
            const codeInput = document.getElementById('codeInput');
            const generateCodeBtn = document.getElementById('generateCodeBtn');
            const codeOptions = document.querySelectorAll('.code-option');
            const settingsBtn = document.getElementById('settingsBtn');
            const settingsDropdown = document.getElementById('settingsDropdown');
            const volumeSlider = document.getElementById('volumeSlider');
            const themeOptions = document.querySelectorAll('.theme-option');
            const historyToggle = document.getElementById('historyToggle');
            const chatHistory = document.getElementById('chatHistory');
            const closeHistory = document.getElementById('closeHistory');
            const historyList = document.getElementById('historyList');
            const clearHistoryBtn = document.getElementById('clearHistoryBtn');
            const messageUsBtn = document.getElementById('messageUsBtn');
            const apiKeyBtn = document.getElementById('apiKeyBtn');
            const apiModal = document.getElementById('apiModal');
            const apiKeyInput = document.getElementById('apiKeyInput');
            const saveApiBtn = document.getElementById('saveApiBtn');
            const skipApiBtn = document.getElementById('skipApiBtn');
            const apiStatus = document.getElementById('apiStatus');
            const modelInfo = document.getElementById('modelInfo');
            const modelStatus = document.getElementById('modelStatus');
            const apiNote = document.getElementById('apiNote');
           
            // Initialize chat history from localStorage
            let chatHistoryData = JSON.parse(localStorage.getItem('blazeChatHistory')) || [];
            let currentChatId = Date.now().toString();
            
            // State variables
            let recognizing = false;
            let recognition;
            let audioEnabled = false;
            let selectedLanguage = 'html';
            let speechVolume = 0.8;
            let currentTheme = 'device';
            let openaiApiKey = localStorage.getItem('blazeOpenAIKey') || '';
            let usingOpenAI = false;
            let openaiModel = 'gpt-3.5-turbo';
            
            // Set the logo image
            const logoUrl = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTryYMGzMy67w29nF47tPjUC3HCipQOT_CLahwD11UzC9-rc90BdWRQ4RM&s";
            document.getElementById('loadingLogo').src = logoUrl;
            document.getElementById('headerLogo').src = logoUrl;
            document.getElementById('botAvatar').src = logoUrl;
            document.getElementById('typingAvatar').src = logoUrl;
           
            // Simulate loading progress
            let progress = 0;
            const loadingInterval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(loadingInterval);
                   
                    setTimeout(() => {
                        loadingScreen.classList.add('hidden');
                        checkAPIKey();
                    }, 500);
                }
                loadingProgress.style.width = `${progress}%`;
            }, 200);
           
            // Check API key on startup
            function checkAPIKey() {
                if (openaiApiKey && openaiApiKey.startsWith('sk-')) {
                    testOpenAIKey();
                } else {
                    setTimeout(() => {
                        apiModal.classList.add('show');
                    }, 300);
                }
            }
            
            // Test OpenAI API key
            async function testOpenAIKey() {
                if (!openaiApiKey || !openaiApiKey.startsWith('sk-')) {
                    return false;
                }
                
                try {
                    const response = await fetch('https://api.openai.com/v1/models', {
                        headers: {
                            'Authorization': `Bearer ${openaiApiKey}`,
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    if (response.ok) {
                        usingOpenAI = true;
                        modelStatus.textContent = 'OpenAI Active';
                        modelStatus.style.background = 'rgba(76, 175, 80, 0.1)';
                        modelStatus.style.color = '#4caf50';
                        modelInfo.innerHTML = '<i class="fas fa-check-circle" style="color: #4caf50;"></i> GPT-3.5 Turbo Active';
                        apiNote.style.display = 'none';
                        messageInput.placeholder = "Ask me anything! I'm powered by OpenAI.";
                        return true;
                    } else {
                        localStorage.removeItem('blazeOpenAIKey');
                        openaiApiKey = '';
                        usingOpenAI = false;
                        return false;
                    }
                } catch (error) {
                    console.error('OpenAI test failed:', error);
                    usingOpenAI = false;
                    return false;
                }
            }
           
            // Set current time for the first message
            document.getElementById('currentTime').textContent = getCurrentTime();
           
            // Function to get current time in HH:MM format
            function getCurrentTime() {
                const now = new Date();
                return `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
            }

            // Function to perform calculations
            function calculateExpression(expression) {
                try {
                    const cleanExpr = expression
                        .replace(/[^-()\d/*+.]/g, '')
                        .replace(/Ã—/g, '*')
                        .replace(/Ã·/g, '/');
                    
                    if (!/^[-+*/0-9().\s]+$/.test(cleanExpr)) {
                        throw new Error('Invalid characters in expression');
                    }
                    
                    const result = Function(`"use strict"; return (${cleanExpr})`)();
                    
                    if (isNaN(result) || !isFinite(result)) {
                        throw new Error('Invalid calculation result');
                    }
                    
                    return {
                        success: true,
                        expression: expression,
                        result: result,
                        formattedResult: Number(result.toFixed(6))
                    };
                } catch (error) {
                    return {
                        success: false,
                        error: error.message
                    };
                }
            }
           
            // Function to add a message to the chat
            function addMessage(message, isUser, links = null, calculation = null, code = null) {
                const messageDiv = document.createElement('div');
                messageDiv.className = isUser ? 'message user-message' : 'message bot-message';
               
                if (!isUser) {
                    const avatarDiv = document.createElement('div');
                    avatarDiv.className = 'bot-avatar';
                    const avatarImg = document.createElement('img');
                    avatarImg.src = logoUrl;
                    avatarImg.alt = 'Blaze AI Avatar';
                    avatarDiv.appendChild(avatarImg);
                    messageDiv.appendChild(avatarDiv);
                }
               
                const bubbleDiv = document.createElement('div');
                bubbleDiv.className = 'message-bubble';
               
                const messageText = document.createElement('div');
                messageText.innerHTML = message;
                bubbleDiv.appendChild(messageText);

                if (calculation && calculation.success) {
                    const calcDiv = document.createElement('div');
                    calcDiv.className = 'calculator-result';
                    
                    const calcExpression = document.createElement('div');
                    calcExpression.className = 'calculation';
                    calcExpression.textContent = `${calculation.expression} =`;
                    
                    const calcResult = document.createElement('div');
                    calcResult.className = 'result';
                    calcResult.textContent = calculation.formattedResult;
                    
                    calcDiv.appendChild(calcExpression);
                    calcDiv.appendChild(calcResult);
                    bubbleDiv.appendChild(calcDiv);
                }

                if (code) {
                    const codeDiv = document.createElement('div');
                    codeDiv.className = 'code-container';
                    
                    const codeHeader = document.createElement('div');
                    codeHeader.className = 'code-header';
                    
                    const codeLanguage = document.createElement('div');
                    codeLanguage.className = 'code-language';
                    codeLanguage.textContent = code.language || 'Code';
                    
                    const copyBtn = document.createElement('button');
                    copyBtn.className = 'code-copy-btn';
                    copyBtn.textContent = 'Copy';
                    copyBtn.addEventListener('click', function() {
                        navigator.clipboard.writeText(code.content);
                        copyBtn.textContent = 'Copied!';
                        copyBtn.classList.add('copied');
                        setTimeout(() => {
                            copyBtn.textContent = 'Copy';
                            copyBtn.classList.remove('copied');
                        }, 2000);
                    });
                    
                    codeHeader.appendChild(codeLanguage);
                    codeHeader.appendChild(copyBtn);
                    
                    const codeContent = document.createElement('pre');
                    codeContent.textContent = code.content;
                    
                    codeDiv.appendChild(codeHeader);
                    codeDiv.appendChild(codeContent);
                    bubbleDiv.appendChild(codeDiv);
                }
               
                if (links && links.length > 0) {
                    const linksContainer = document.createElement('div');
                    linksContainer.className = 'links-container';
                   
                    const linksTitle = document.createElement('div');
                    linksTitle.className = 'links-title';
                    linksTitle.innerHTML = '<i class="fas fa-link"></i> Further Reading';
                    linksContainer.appendChild(linksTitle);
                   
                    links.forEach(link => {
                        const linkItem = document.createElement('div');
                        linkItem.className = 'link-item';
                       
                        const linkAnchor = document.createElement('a');
                        linkAnchor.href = link.url;
                        linkAnchor.target = '_blank';
                        linkAnchor.innerHTML = `<i class="fas fa-external-link-alt"></i> ${link.title}`;
                       
                        linkItem.appendChild(linkAnchor);
                        linksContainer.appendChild(linkItem);
                    });
                   
                    bubbleDiv.appendChild(linksContainer);
                }
               
                if (!isUser) {
                    const actionsDiv = document.createElement('div');
                    actionsDiv.className = 'message-actions';
                   
                    const copyBtn = document.createElement('button');
                    copyBtn.className = 'action-btn';
                    copyBtn.innerHTML = '<i class="far fa-copy"></i> Copy';
                    copyBtn.addEventListener('click', function() {
                        let textToCopy = message;
                        if (calculation && calculation.success) {
                            textToCopy += `\n\nCalculation: ${calculation.expression} = ${calculation.formattedResult}`;
                        }
                        if (code) {
                            textToCopy += `\n\nCode:\n${code.content}`;
                        }
                        navigator.clipboard.writeText(textToCopy.replace(/<[^>]*>/g, ''));
                        copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                        setTimeout(() => {
                            copyBtn.innerHTML = '<i class="far fa-copy"></i> Copy';
                        }, 2000);
                    });
                   
                    const likeBtn = document.createElement('button');
                    likeBtn.className = 'action-btn';
                    likeBtn.innerHTML = '<i class="far fa-thumbs-up"></i> Helpful';
                    likeBtn.addEventListener('click', function() {
                        likeBtn.innerHTML = '<i class="fas fa-thumbs-up"></i> Thank you!';
                        setTimeout(() => {
                            likeBtn.innerHTML = '<i class="far fa-thumbs-up"></i> Helpful';
                        }, 2000);
                    });
                   
                    actionsDiv.appendChild(copyBtn);
                    actionsDiv.appendChild(likeBtn);
                    bubbleDiv.appendChild(actionsDiv);
                }
               
                const timeDiv = document.createElement('div');
                timeDiv.className = 'message-time';
                timeDiv.textContent = getCurrentTime();
               
                bubbleDiv.appendChild(timeDiv);
                messageDiv.appendChild(bubbleDiv);
               
                chatArea.insertBefore(messageDiv, typingIndicator);
                chatArea.scrollTop = chatArea.scrollHeight;
            }
           
            // Function to save chat history
            function saveChatHistory(userMessage, botResponse) {
                const chatItem = {
                    id: currentChatId,
                    userMessage: userMessage.substring(0, 100),
                    botResponse: botResponse.message.substring(0, 150).replace(/<[^>]*>/g, ''),
                    timestamp: Date.now(),
                    timeString: getCurrentTime()
                };
                
                // Find if this chat already exists in history
                const existingIndex = chatHistoryData.findIndex(item => item.id === currentChatId);
                
                if (existingIndex > -1) {
                    // Update existing chat
                    chatHistoryData[existingIndex] = chatItem;
                } else {
                    // Add new chat to history
                    chatHistoryData.push(chatItem);
                }
                
                // Keep only last 50 chats
                if (chatHistoryData.length > 50) {
                    chatHistoryData.shift();
                }
                
                // Save to localStorage
                localStorage.setItem('blazeChatHistory', JSON.stringify(chatHistoryData));
                
                // Update history display
                updateHistoryDisplay();
            }

            // Function to update history display
            function updateHistoryDisplay() {
                historyList.innerHTML = '';
                
                chatHistoryData.forEach((item, index) => {
                    const historyItem = document.createElement('div');
                    historyItem.className = 'history-item';
                    if (item.id === currentChatId) {
                        historyItem.classList.add('active');
                    }
                    
                    historyItem.innerHTML = `
                        <div class="history-preview">
                            <strong>Q:</strong> ${item.userMessage}
                        </div>
                        <div class="history-preview">
                            <strong>A:</strong> ${item.botResponse}
                        </div>
                        <div class="history-time">
                            <span>${new Date(item.timestamp).toLocaleDateString()}</span>
                            <span>${item.timeString}</span>
                        </div>
                    `;
                    
                    historyItem.addEventListener('click', () => {
                        loadChatFromHistory(item.id);
                    });
                    
                    historyList.appendChild(historyItem);
                });
            }

            // Function to load chat from history
            function loadChatFromHistory(chatId) {
                // Clear current chat except the first bot message
                const messages = chatArea.querySelectorAll('.message');
                messages.forEach((msg, index) => {
                    if (index > 0) {
                        msg.remove();
                    }
                });
                
                // Find and load the chat
                const chatToLoad = chatHistoryData.find(item => item.id === chatId);
                if (chatToLoad) {
                    currentChatId = chatId;
                    
                    // Add user message
                    addMessage(chatToLoad.userMessage, true);
                    
                    // Add bot response
                    addMessage(`<b>ðŸ§  Blaze AI:</b> ${chatToLoad.botResponse}`, false);
                    
                    // Update active state in history
                    updateHistoryDisplay();
                }
            }
           
            // Function to generate helpful links based on user query
            function generateLinks(query) {
                const queryLower = query.toLowerCase();
                const links = [];
               
                if (queryLower.includes('python') || queryLower.includes('programming') || queryLower.includes('code')) {
                    links.push(
                        { title: 'Python Official Documentation', url: 'https://docs.python.org/3/' },
                        { title: 'W3Schools Python Tutorial', url: 'https://www.w3schools.com/python/' },
                        { title: 'Real Python Tutorials', url: 'https://realpython.com/' }
                    );
                }
               
                if (queryLower.includes('quantum') || queryLower.includes('physics') || queryLower.includes('science')) {
                    links.push(
                        { title: 'NASA Official Website', url: 'https://www.nasa.gov/' },
                        { title: 'National Geographic', url: 'https://www.nationalgeographic.com/' },
                        { title: 'Scientific American', url: 'https://www.scientificamerican.com/' }
                    );
                }
               
                if (queryLower.includes('business') || queryLower.includes('entrepreneurship') || queryLower.includes('startup')) {
                    links.push(
                        { title: 'Harvard Business Review', url: 'https://hbr.org/' },
                        { title: 'Forbes Business', url: 'https://www.forbes.com/business/' },
                        { title: 'Entrepreneur Magazine', url: 'https://www.entrepreneur.com/' }
                    );
                }
               
                if (links.length === 0) {
                    links.push(
                        { title: 'Wikipedia', url: 'https://www.wikipedia.org/' },
                        { title: 'Google Search', url: 'https://www.google.com/' },
                        { title: 'Britannica', url: 'https://www.britannica.com/' }
                    );
                }
               
                return links;
            }
            
            // Function to generate code based on user request
            function generateCode(query, language) {
                const queryLower = query.toLowerCase();
                
                if (language === 'html') {
                    if (queryLower.includes('button') || queryLower.includes('form')) {
                        return {
                            language: 'HTML',
                            content: `<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Button Example</title>
    <style>
        .btn {
            background: linear-gradient(45deg, #4facfe, #00f2fe);
            border: none;
            color: white;
            padding: 12px 24px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border-radius: 25px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.2);
        }
    </style>
</head>
<body>
    <button class="btn">Click Me</button>
</body>
</html>`
                        };
                    }
                }
                
                return {
                    language: language.toUpperCase(),
                    content: `// ${language.toUpperCase()} code for: ${query}\n// Generated by Blaze AI\n\n// Your code implementation here`
                };
            }
            
            // Call OpenAI API for responses
            async function callOpenAI(prompt, isCodeRequest = false) {
                if (!usingOpenAI || !openaiApiKey) {
                    return null;
                }
                
                try {
                    let systemMessage = "You are Blaze AI, a helpful AI assistant. Provide clear, concise, and informative responses.";
                    
                    if (isCodeRequest) {
                        systemMessage = "You are Blaze AI, a coding assistant. Generate clean, efficient, and well-documented code. Explain your code when helpful.";
                    }
                    
                    const response = await fetch('https://api.openai.com/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${openaiApiKey}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            model: openaiModel,
                            messages: [
                                { role: "system", content: systemMessage },
                                { role: "user", content: prompt }
                            ],
                            temperature: 0.7,
                            max_tokens: 1000
                        })
                    });
                    
                    if (!response.ok) {
                        throw new Error(`OpenAI API error: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    return data.choices[0].message.content;
                    
                } catch (error) {
                    console.error('OpenAI API call failed:', error);
                    return null;
                }
            }
            
            // Enhanced response generation with OpenAI
            async function getEnhancedResponse(userMessage) {
                const queryLower = userMessage.toLowerCase();
                
                // Check for common greetings
                if (queryLower.includes('hello') || queryLower.includes('hi') || queryLower.includes('hey')) {
                    return {
                        message: `<b>ðŸ§  Blaze AI:</b> Hello! I'm Blaze AI, enhanced with OpenAI. ${usingOpenAI ? 'I can help with any question!' : 'Enter your OpenAI API key to unlock my full capabilities.'}`,
                        links: null,
                        calculation: null,
                        code: null
                    };
                }
                
                // Try OpenAI first if available
                if (usingOpenAI) {
                    const openaiResponse = await callOpenAI(userMessage);
                    if (openaiResponse) {
                        return {
                            message: `<b>ðŸ§  Blaze AI:</b> ${openaiResponse}`,
                            links: generateLinks(userMessage),
                            calculation: null,
                            code: null
                        };
                    }
                }
                
                // Fallback to basic responses
                if (queryLower.includes('who made you') || queryLower.includes('who created you')) {
                    return {
                        message: `<b>ðŸ§  Blaze AI:</b> I was created by <b>Richard Aveen</b> and <b>Aayush</b>! ${usingOpenAI ? '' : 'Add your OpenAI API key for more intelligent responses.'}`,
                        links: null,
                        calculation: null,
                        code: null
                    };
                }
                
                if (queryLower.includes('thank')) {
                    return {
                        message: `<b>ðŸ§  Blaze AI:</b> You're welcome! ${usingOpenAI ? 'Is there anything else I can help you with?' : 'Enter your OpenAI API key for more detailed assistance.'}`,
                        links: null,
                        calculation: null,
                        code: null
                    };
                }
                
                // Check for calculations
                const calculationMatch = userMessage.match(/(?:calculate|compute|what is|solve)\s+(.+)/i) || 
                                       userMessage.match(/(\d+[\s\d+\-*/().Ã—Ã·]+)/);
                
                if (calculationMatch) {
                    const expression = calculationMatch[1] || calculationMatch[0];
                    const calculation = calculateExpression(expression);
                    
                    if (calculation.success) {
                        return {
                            message: `<b>ðŸ§  Blaze AI:</b> Calculation Result:`,
                            links: null,
                            calculation: calculation,
                            code: null
                        };
                    }
                }
                
                // Check for code requests
                if (queryLower.includes('code') || queryLower.includes('create') || 
                    queryLower.includes('make') || queryLower.includes('build') ||
                    queryLower.includes('html') || queryLower.includes('css') ||
                    queryLower.includes('javascript') || queryLower.includes('python') ||
                    queryLower.includes('java') || queryLower.includes('program')) {
                    
                    let detectedLanguage = 'javascript';
                    if (queryLower.includes('html')) detectedLanguage = 'html';
                    else if (queryLower.includes('css')) detectedLanguage = 'css';
                    else if (queryLower.includes('python')) detectedLanguage = 'python';
                    else if (queryLower.includes('java') && !queryLower.includes('javascript')) detectedLanguage = 'java';
                    
                    // Try OpenAI for code if available
                    if (usingOpenAI) {
                        const codePrompt = `Generate ${detectedLanguage} code for: ${userMessage}. Include comments and best practices.`;
                        const openaiCode = await callOpenAI(codePrompt, true);
                        
                        if (openaiCode) {
                            return {
                                message: `<b>ðŸ§  Blaze AI:</b> Here's the ${detectedLanguage.toUpperCase()} code:`,
                                links: generateLinks(`${detectedLanguage} programming`),
                                calculation: null,
                                code: { language: detectedLanguage.toUpperCase(), content: openaiCode }
                            };
                        }
                    }
                    
                    const code = generateCode(userMessage, detectedLanguage);
                    return {
                        message: `<b>ðŸ§  Blaze AI:</b> Basic ${detectedLanguage.toUpperCase()} Code (add OpenAI key for better code):`,
                        links: generateLinks(`${detectedLanguage} programming`),
                        calculation: null,
                        code: code
                    };
                }
                
                // General response
                const responses = [
                    `<b>ðŸ§  Blaze AI:</b> I understand you're asking about "${userMessage}". ${usingOpenAI ? '' : 'For more detailed and accurate responses, please enter your OpenAI API key using the key icon above.'}`,
                    `<b>ðŸ§  Blaze AI:</b> That's an interesting question! ${usingOpenAI ? 'Let me think about that...' : 'With an OpenAI API key, I can provide much more comprehensive answers.'}`,
                    `<b>ðŸ§  Blaze AI:</b> I'd be happy to help with "${userMessage}". ${usingOpenAI ? '' : 'Unlock my full potential by adding your OpenAI API key!'}`
                ];
               
                return {
                    message: responses[Math.floor(Math.random() * responses.length)],
                    links: generateLinks(userMessage),
                    calculation: null,
                    code: null
                };
            }
            
            // Text-to-Speech
            function speakResponse(text) {
                if (!audioEnabled) return;
                
                const plainText = text.replace(/<[^>]*>/g, '');
                
                if ('speechSynthesis' in window) {
                    window.speechSynthesis.cancel();
                    
                    const utterance = new SpeechSynthesisUtterance(plainText);
                    utterance.rate = 0.9;
                    utterance.pitch = 1;
                    utterance.volume = speechVolume;
                    
                    window.speechSynthesis.speak(utterance);
                }
            }
           
            // Function to handle sending a message
            async function sendMessage() {
                const message = messageInput.value.trim();
                if (message === '') return;
               
                addMessage(message, true);
                messageInput.value = '';
                messageInput.style.height = 'auto';
               
                typingIndicator.classList.add('active');
               
                try {
                    const botResponse = await getEnhancedResponse(message);
                    typingIndicator.classList.remove('active');
                    addMessage(botResponse.message, false, botResponse.links, botResponse.calculation, botResponse.code);
                    
                    // Save to chat history
                    saveChatHistory(message, botResponse);
                    
                    speakResponse(botResponse.message);
                } catch (error) {
                    typingIndicator.classList.remove('active');
                    addMessage("Sorry, I encountered an error. Please try again.", false);
                    console.error(error);
                }
            }
            
            // Function to handle code generation
            function handleCodeGeneration() {
                const description = codeInput.value.trim();
                if (description === '') return;
                
                addMessage(`Generate ${selectedLanguage.toUpperCase()} code for: ${description}`, true);
                codeInput.value = '';
                
                typingIndicator.classList.add('active');
                
                setTimeout(async () => {
                    try {
                        let codeResponse;
                        
                        // Try OpenAI for code if available
                        if (usingOpenAI) {
                            const codePrompt = `Generate ${selectedLanguage} code for: ${description}. Include comments and best practices. Return only the code.`;
                            const openaiCode = await callOpenAI(codePrompt, true);
                            
                            if (openaiCode) {
                                codeResponse = {
                                    message: `<b>ðŸ§  Blaze AI:</b> OpenAI-generated ${selectedLanguage.toUpperCase()} code:`,
                                    links: generateLinks(`${selectedLanguage} programming`),
                                    calculation: null,
                                    code: { language: selectedLanguage.toUpperCase(), content: openaiCode }
                                };
                            }
                        }
                        
                        if (!codeResponse) {
                            const code = generateCode(description, selectedLanguage);
                            codeResponse = {
                                message: `<b>ðŸ§  Blaze AI:</b> Basic ${selectedLanguage.toUpperCase()} code:`,
                                links: generateLinks(`${selectedLanguage} programming`),
                                calculation: null,
                                code: code
                            };
                        }
                        
                        typingIndicator.classList.remove('active');
                        addMessage(
                            codeResponse.message,
                            false, 
                            codeResponse.links,
                            null,
                            codeResponse.code
                        );
                        
                        // Save to chat history
                        saveChatHistory(`Generate ${selectedLanguage} code for: ${description}`, codeResponse);
                        
                    } catch (error) {
                        typingIndicator.classList.remove('active');
                        addMessage("Error generating code. Please try again.", false);
                        console.error(error);
                    }
                }, 1500);
            }
            
            // Voice recognition
            function toggleListening() {
                if (recognizing) {
                    stopListening();
                } else {
                    startListening();
                }
            }
            
            function startListening() {
                if (!('webkitSpeechRecognition' in window)) {
                    alert("Your browser doesn't support voice recognition. Try Chrome or Edge.");
                    return;
                }
                
                recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
                recognition.lang = 'en-US';
                recognition.continuous = false;
                recognition.interimResults = false;
                
                recognition.onstart = () => {
                    recognizing = true;
                    voiceButton.innerHTML = '<i class="fas fa-circle"></i>';
                    voiceButton.classList.add('listening');
                };
                
                recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript;
                    messageInput.value = transcript;
                    sendMessage();
                };
                
                recognition.onerror = (e) => {
                    console.error(e);
                    recognizing = false;
                    voiceButton.innerHTML = '<i class="fas fa-microphone"></i>';
                    voiceButton.classList.remove('listening');
                    
                    if (e.error === 'not-allowed') {
                        addMessage("Microphone access denied. Please allow microphone permissions.", false);
                    }
                };
                
                recognition.onend = () => {
                    recognizing = false;
                    voiceButton.innerHTML = '<i class="fas fa-microphone"></i>';
                    voiceButton.classList.remove('listening');
                };
                
                recognition.start();
            }
            
            function stopListening() {
                if (recognition) {
                    recognition.stop();
                }
            }

            // Toggle audio response
            function toggleAudio() {
                audioEnabled = !audioEnabled;
                if (audioEnabled) {
                    audioToggleBtn.classList.add('active');
                    audioToggleBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
                    addMessage("Audio responses enabled.", false);
                } else {
                    audioToggleBtn.classList.remove('active');
                    audioToggleBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
                    addMessage("Audio responses disabled.", false);
                }
            }

            // Toggle settings dropdown
            function toggleSettingsDropdown() {
                settingsDropdown.classList.toggle('show');
            }

            // Change theme
            function changeTheme(theme) {
                currentTheme = theme;
                chatContainer.className = `chat-container ${theme}-theme`;
                
                themeOptions.forEach(option => {
                    option.classList.remove('active');
                    if (option.getAttribute('data-theme') === theme) {
                        option.classList.add('active');
                    }
                });
                
                localStorage.setItem('blazeTheme', theme);
            }

            // Toggle chat history
            function toggleChatHistory() {
                chatHistory.classList.toggle('active');
            }

            // Clear chat history
            function clearChatHistory() {
                if (confirm("Clear all chat history? This action cannot be undone.")) {
                    chatHistoryData = [];
                    localStorage.removeItem('blazeChatHistory');
                    updateHistoryDisplay();
                    addMessage("Chat history cleared.", false);
                }
            }

            // Save API key
            async function saveApiKey() {
                const key = apiKeyInput.value.trim();
                
                if (!key.startsWith('sk-')) {
                    apiStatus.textContent = "Invalid API key format. Should start with 'sk-'";
                    apiStatus.className = "api-status error";
                    return;
                }
                
                apiStatus.textContent = "Testing API key...";
                apiStatus.className = "api-status";
                apiStatus.style.display = 'block';
                
                // Test the key
                openaiApiKey = key;
                const testResult = await testOpenAIKey();
                
                if (testResult) {
                    localStorage.setItem('blazeOpenAIKey', key);
                    apiStatus.textContent = "API key saved successfully!";
                    apiStatus.className = "api-status success";
                    
                    setTimeout(() => {
                        apiModal.classList.remove('show');
                        chatContainer.classList.add('visible');
                    }, 1000);
                } else {
                    apiStatus.textContent = "Invalid API key. Please check and try again.";
                    apiStatus.className = "api-status error";
                    openaiApiKey = '';
                }
            }

            // Skip API key
            function skipApiKey() {
                apiModal.classList.remove('show');
                chatContainer.classList.add('visible');
                addMessage("Welcome to Blaze AI Basic Mode! Enter your OpenAI API key for enhanced responses.", false);
            }

            // Message Us function
            function goToMessageUs() {
                const messageUsHTML = `
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Message Us - Blaze AI</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .message-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            max-width: 500px;
            width: 100%;
        }
        
        .back-btn {
            background: #4facfe;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 20px;
            transition: all 0.3s;
        }
        
        .back-btn:hover {
            background: #3a9ae8;
            transform: translateY(-2px);
        }
        
        h1 {
            color: #1a2a6c;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .contact-info {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 4px solid #ff7e5f;
        }
        
        .contact-item {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 20px 0;
            padding: 10px;
            border-radius: 10px;
            transition: background 0.3s;
        }
        
        .contact-item:hover {
            background: rgba(79, 172, 254, 0.1);
        }
        
        .contact-item i {
            color: #ff7e5f;
            width: 24px;
            font-size: 18px;
        }
        
        .contact-details {
            flex: 1;
        }
        
        .contact-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }
        
        .contact-value {
            color: #666;
            font-size: 14px;
        }
        
        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            justify-content: center;
        }
        
        .social-link {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #4facfe;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .social-link:hover {
            transform: translateY(-5px);
            background: #ff7e5f;
        }
    </style>
</head>
<body>
    <div class="message-container">
        <button class="back-btn" onclick="window.history.back()">
            <i class="fas fa-arrow-left"></i> Back to Blaze AI
        </button>
        
        <h1>
            <i class="fas fa-comment-alt"></i>
            Message Us
        </h1>
        <p>Get in touch with the Blaze AI team!</p>
        
        <div class="contact-info">
            <div class="contact-item">
                <i class="fas fa-envelope"></i>
                <div class="contact-details">
                    <div class="contact-title">Email</div>
                    <div class="contact-value">support@blazeai.com</div>
                </div>
            </div>
            
            <div class="contact-item">
                <i class="fas fa-map-marker-alt"></i>
                <div class="contact-details">
                    <div class="contact-title">Creators</div>
                    <div class="contact-value">Richard Aveen & Aayush</div>
                </div>
            </div>
        </div>
        
        <div class="social-links">
            <a href="#" class="social-link">
                <i class="fab fa-github"></i>
            </a>
            <a href="#" class="social-link">
                <i class="fab fa-linkedin"></i>
            </a>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
</body>
</html>`;

                const newWindow = window.open();
                newWindow.document.write(messageUsHTML);
                newWindow.document.close();
            }

            // Load saved preferences
            const savedTheme = localStorage.getItem('blazeTheme') || 'device';
            changeTheme(savedTheme);

            const savedVolume = localStorage.getItem('blazeVolume');
            if (savedVolume) {
                speechVolume = parseFloat(savedVolume);
                volumeSlider.value = speechVolume;
            }

            // Initialize API status
            if (openaiApiKey) {
                testOpenAIKey();
            } else {
                modelInfo.innerHTML = '<i class="fas fa-key" style="color: #ff7e5f;"></i> Enter OpenAI API Key';
            }
           
            // Auto-resize textarea
            messageInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = (this.scrollHeight) + 'px';
            });
           
            // Event listeners
            sendButton.addEventListener('click', sendMessage);
            voiceButton.addEventListener('click', toggleListening);
            audioToggleBtn.addEventListener('click', toggleAudio);
            generateCodeBtn.addEventListener('click', handleCodeGeneration);
            settingsBtn.addEventListener('click', toggleSettingsDropdown);
            apiKeyBtn.addEventListener('click', () => apiModal.classList.add('show'));
            messageUsBtn.addEventListener('click', goToMessageUs);
            historyToggle.addEventListener('click', toggleChatHistory);
            closeHistory.addEventListener('click', toggleChatHistory);
            clearHistoryBtn.addEventListener('click', clearChatHistory);
            saveApiBtn.addEventListener('click', saveApiKey);
            skipApiBtn.addEventListener('click', skipApiKey);
           
            // Close API modal when clicking outside
            apiModal.addEventListener('click', (e) => {
                if (e.target === apiModal) {
                    apiModal.classList.remove('show');
                    if (!chatContainer.classList.contains('visible')) {
                        chatContainer.classList.add('visible');
                    }
                }
            });
           
            messageInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
            
            codeInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    handleCodeGeneration();
                }
            });
           
            // Code language selection
            codeOptions.forEach(option => {
                option.addEventListener('click', function() {
                    codeOptions.forEach(opt => opt.classList.remove('active'));
                    this.classList.add('active');
                    selectedLanguage = this.getAttribute('data-lang');
                });
            });
           
            // Theme selection
            themeOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const theme = this.getAttribute('data-theme');
                    changeTheme(theme);
                });
            });
           
            // Volume slider
            volumeSlider.addEventListener('input', function() {
                speechVolume = parseFloat(this.value);
                localStorage.setItem('blazeVolume', speechVolume);
            });
           
            // New chat button
            newChatBtn.addEventListener('click', function() {
                const messages = chatArea.querySelectorAll('.message');
                messages.forEach(msg => {
                    if (msg !== messages[0]) {
                        msg.remove();
                    }
                });
               
                // Generate new chat ID
                currentChatId = Date.now().toString();
                
                // Update history display
                updateHistoryDisplay();
               
                addMessage("Hello! I'm Blaze AI. How can I help you today?", false);
            });
           
            // Suggestion chips
            document.querySelectorAll('.suggestion-chip').forEach(chip => {
                chip.addEventListener('click', function() {
                    messageInput.value = this.textContent;
                    sendMessage();
                });
            });
           
            // Close dropdown when clicking outside
            document.addEventListener('click', function(event) {
                if (!settingsBtn.contains(event.target) && !settingsDropdown.contains(event.target)) {
                    settingsDropdown.classList.remove('show');
                }
            });

            // Initial history display
            updateHistoryDisplay();
           
            // Focus on input when page loads
            setTimeout(() => {
                messageInput.focus();
            }, 1000);
        });
    </script>
</body>
</html>
How to Use with OpenAI:
1. Get Your OpenAI API Key:
Go to platform.openai.com/api-keys

Sign in or create an account

Click "Create new secret key"

Copy your key (starts with sk-)

2. Enter Your API Key:
The app will prompt you on first load

Or click the key icon (ðŸ”‘) in the top bar

Paste your API key and click "Save & Continue"

3. Features with OpenAI:
Intelligent Responses: GPT-3.5 powered answers on any topic

Better Code Generation: AI-generated code with explanations

Creative Writing: Stories, poems, content creation

Language Translation: Multi-language support

Problem Solving: Math, logic, analysis

Summarization: Long text summarization

4. Without OpenAI (Basic Mode):
Still works with basic responses

Limited to predefined knowledge base

Basic code generation

Can add API key anytime

5. Cost Information:
OpenAI charges based on usage (tokens)

Approximately $0.002 per 1K tokens (1 token â‰ˆ 0.75 words)

For casual use, costs are minimal (few cents per day)

Monitor usage at platform.openai.com/usage

6. Security:
API key stored locally in your browser

Never sent to our servers

You control your usage and costs

The app now provides MUCH better responses with OpenAI while keeping all your original features (voice control, code generation, chat history, etc.)!

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
I see you've shared an API key. âš ï¸ IMPORTANT SECURITY WARNING: You should NEVER share your API key publicly! Anyone with this key can use it and charge costs to your account.

Please IMMEDIATELY:

Revoke this key at platform.openai.com/api-keys

Create a new key

Never share it publicly again

Here's your Blaze AI with OpenAI integration ready to use:
Copy and paste this code into an HTML file. When it loads:

Click the key icon (ðŸ”‘) in the top right

Enter your new OpenAI API key

Click "Save & Continue"

html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸ”¥ Blaze AI with OpenAI</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: url('https://i.pinimg.com/736x/a0/9f/d7/a09fd769b1c973ff30eae88d7a867b57.jpg') no-repeat center center fixed;
            background-size: cover;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: -1;
        }

        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 0.5s, visibility 0.5s;
        }

        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loading-logo {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            animation: pulse 2s infinite;
            overflow: hidden;
            background: white;
            padding: 10px;
        }

        .loading-logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 50%;
        }

        .loading-text {
            color: white;
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 30px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }

        .loading-bar {
            width: 300px;
            height: 8px;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            overflow: hidden;
        }

        .loading-progress {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #ff7e5f, #feb47b);
            border-radius: 4px;
            transition: width 0.3s;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .chat-container {
            width: 100%;
            max-width: 900px;
            height: 90vh;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            position: relative;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s, transform 0.5s;
        }

        .chat-container.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .chat-container.device-theme {
            background-color: rgba(255, 255, 255, 0.95);
        }

        .chat-container.white-theme {
            background-color: #ffffff;
        }

        .chat-container.black-theme {
            background-color: #1a1a1a;
            color: #ffffff;
        }

        .chat-container.black-theme .message-bubble {
            color: #ffffff;
        }

        .chat-container.black-theme .bot-message .message-bubble {
            background-color: #2d2d2d;
            color: #ffffff;
        }

        .chat-container.black-theme .user-message .message-bubble {
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            color: white;
        }

        .chat-container.black-theme .message-input {
            background-color: #2d2d2d;
            color: white;
            border-color: #444;
        }

        .chat-container.black-theme .chat-area {
            background-color: #1a1a1a;
        }

        .chat-container.black-theme .input-area {
            background-color: #2d2d2d;
            border-color: #444;
        }

        .chat-container.black-theme .code-container {
            background: #000000;
        }

        .brand-header {
            background: linear-gradient(90deg, #ff7e5f, #feb47b);
            padding: 15px 25px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: relative;
        }

        .brand-left {
            display: flex;
            align-items: center;
        }

        .brand-logo {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .brand-logo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .brand-name {
            font-size: 24px;
            font-weight: 700;
            color: white;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
            letter-spacing: 1px;
        }

        .brand-tagline {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.8);
            margin-top: 2px;
        }

        .header-actions {
            display: flex;
            position: relative;
        }

        .header-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-left: 10px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .header-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .header-btn.active {
            background: rgba(255, 255, 255, 0.4);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
        }

        .api-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .api-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .api-modal-content {
            background: white;
            border-radius: 20px;
            padding: 30px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
            transform: translateY(-20px);
            transition: transform 0.3s;
        }

        .api-modal.show .api-modal-content {
            transform: translateY(0);
        }

        .api-modal h2 {
            color: #1a2a6c;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .api-modal p {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .api-input-group {
            margin-bottom: 20px;
        }

        .api-input-group label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 14px;
        }

        .api-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s;
        }

        .api-input:focus {
            border-color: #4facfe;
            outline: none;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .api-modal-buttons {
            display: flex;
            gap: 10px;
            margin-top: 25px;
        }

        .api-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }

        .api-btn.primary {
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            color: white;
        }

        .api-btn.primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(79, 172, 254, 0.4);
        }

        .api-btn.secondary {
            background: #f0f2f5;
            color: #666;
        }

        .api-btn.secondary:hover {
            background: #e0e2e5;
        }

        .api-status {
            padding: 10px;
            border-radius: 8px;
            margin-top: 15px;
            font-size: 13px;
            display: none;
        }

        .api-status.success {
            background: rgba(76, 175, 80, 0.1);
            color: #4caf50;
            display: block;
        }

        .api-status.error {
            background: rgba(244, 67, 54, 0.1);
            color: #f44336;
            display: block;
        }

        .message-us-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
            font-weight: 600;
            margin-left: 10px;
        }

        .message-us-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .settings-dropdown {
            position: absolute;
            top: 45px;
            right: 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.15);
            width: 280px;
            padding: 15px;
            z-index: 100;
            display: none;
            opacity: 0;
            transform: translateY(-10px);
            transition: opacity 0.3s, transform 0.3s;
        }

        .settings-dropdown.show {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        .settings-dropdown h3 {
            margin-bottom: 15px;
            color: #333;
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .settings-dropdown .setting-item {
            margin-bottom: 15px;
        }

        .settings-dropdown .setting-item label {
            display: block;
            margin-bottom: 5px;
            color: #666;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .volume-slider {
            width: 100%;
            height: 6px;
            -webkit-appearance: none;
            appearance: none;
            background: #e0e0e0;
            border-radius: 3px;
            outline: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: #ff7e5f;
            cursor: pointer;
        }

        .theme-options {
            display: flex;
            gap: 10px;
            margin-top: 8px;
        }

        .theme-option {
            flex: 1;
            padding: 8px;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
        }

        .theme-option:hover {
            transform: translateY(-2px);
        }

        .theme-option.active {
            border-color: #ff7e5f;
            background: rgba(255, 126, 95, 0.1);
        }

        .theme-option.device {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            color: white;
        }

        .theme-option.white {
            background: #ffffff;
            color: #333;
            border: 1px solid #e0e0e0;
        }

        .theme-option.black {
            background: #1a1a1a;
            color: white;
        }

        .chat-area {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background-color: #f8f9fa;
        }

        .message {
            margin-bottom: 20px;
            display: flex;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .bot-message {
            justify-content: flex-start;
        }

        .user-message {
            justify-content: flex-end;
        }

        .message-bubble {
            max-width: 70%;
            padding: 15px 20px;
            border-radius: 18px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            line-height: 1.5;
            position: relative;
        }

        .bot-message .message-bubble {
            background-color: white;
            border-bottom-left-radius: 5px;
            color: #333;
        }

        .user-message .message-bubble {
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            color: white;
            border-bottom-right-radius: 5px;
        }

        .message-time {
            font-size: 11px;
            margin-top: 8px;
            opacity: 0.7;
            text-align: right;
        }

        .bot-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-right: 12px;
            flex-shrink: 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .bot-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .input-area {
            padding: 20px;
            background-color: white;
            border-top: 1px solid #e0e0e0;
            display: flex;
            align-items: flex-end;
        }

        .message-input {
            flex: 1;
            padding: 15px 20px;
            border: 1px solid #e0e0e0;
            border-radius: 25px;
            background-color: #f8f9fa;
            font-size: 16px;
            outline: none;
            transition: all 0.3s;
            resize: none;
            height: 50px;
            max-height: 120px;
        }

        .message-input:focus {
            background-color: white;
            border-color: #4facfe;
            box-shadow: 0 0 0 2px rgba(79, 172, 254, 0.2);
        }

        .send-button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            border: none;
            margin-left: 10px;
            color: white;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }

        .send-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .send-button:active {
            transform: scale(0.98);
        }

        .voice-button {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(90deg, #ff7e5f, #feb47b);
            border: none;
            margin-left: 10px;
            color: white;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }

        .voice-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .voice-button.listening {
            background: linear-gradient(90deg, #ff0000, #ff6600);
            animation: pulse 1.5s infinite;
        }

        .audio-toggle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(90deg, #4caf50, #8bc34a);
            border: none;
            margin-left: 10px;
            color: white;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s;
        }

        .audio-toggle:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .audio-toggle.active {
            background: linear-gradient(90deg, #f44336, #ff9800);
            box-shadow: 0 0 15px rgba(244, 67, 54, 0.5);
        }

        .typing-indicator {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .typing-indicator.active {
            opacity: 1;
        }

        .typing-dots {
            display: flex;
            margin-left: 10px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background-color: #bbb;
            border-radius: 50%;
            margin: 0 2px;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) {
            animation-delay: -0.32s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes typing {
            0%, 80%, 100% {
                transform: scale(0.8);
                opacity: 0.5;
            }
            40% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .welcome-message {
            text-align: center;
            margin: 20px 0 30px;
            color: #666;
            font-style: italic;
        }

        .suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 15px 0;
        }

        .suggestion-chip {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .suggestion-chip:hover {
            background: #f0f2f5;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .message-actions {
            display: flex;
            margin-top: 10px;
            gap: 10px;
        }

        .action-btn {
            background: rgba(79, 172, 254, 0.1);
            border: 1px solid rgba(79, 172, 254, 0.3);
            border-radius: 15px;
            padding: 5px 12px;
            font-size: 12px;
            color: #4facfe;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .action-btn:hover {
            background: rgba(79, 172, 254, 0.2);
        }

        .links-container {
            margin-top: 15px;
            padding: 15px;
            background: #f0f7ff;
            border-radius: 10px;
            border-left: 4px solid #4facfe;
        }

        .links-title {
            font-weight: 600;
            margin-bottom: 8px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .link-item {
            margin: 8px 0;
            padding: 8px;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .link-item:hover {
            background: rgba(79, 172, 254, 0.1);
        }

        .link-item a {
            color: #4facfe;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .link-item a:hover {
            text-decoration: underline;
        }

        .calculator-result {
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 15px;
            margin-top: 10px;
            font-family: 'Courier New', monospace;
        }

        .calculation {
            font-size: 18px;
            font-weight: bold;
            color: #4facfe;
            margin-bottom: 5px;
        }

        .result {
            font-size: 24px;
            font-weight: bold;
            color: #ff7e5f;
        }

        .code-container {
            background: #2d2d2d;
            color: #f8f8f2;
            border-radius: 8px;
            padding: 15px;
            margin-top: 10px;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            position: relative;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 1px solid #444;
        }

        .code-language {
            font-weight: bold;
            color: #ff7e5f;
        }

        .code-copy-btn {
            background: #4facfe;
            border: none;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: background 0.3s;
        }

        .code-copy-btn:hover {
            background: #3a9ae8;
        }

        .code-copy-btn.copied {
            background: #4caf50;
        }

        .code-generator {
            margin-top: 15px;
            padding: 15px;
            background: #f0f7ff;
            border-radius: 10px;
            border-left: 4px solid #4facfe;
        }

        .code-generator-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .code-options {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 15px;
        }

        .code-option {
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 20px;
            padding: 8px 16px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .code-option:hover {
            background: #f0f2f5;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .code-option.active {
            background: #4facfe;
            color: white;
            border-color: #4facfe;
        }

        .code-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 10px;
            font-size: 14px;
            resize: vertical;
            min-height: 80px;
        }

        .generate-code-btn {
            background: linear-gradient(90deg, #4facfe, #00f2fe);
            border: none;
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .generate-code-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .chat-history {
            position: absolute;
            left: -300px;
            top: 0;
            width: 280px;
            height: 100%;
            background: white;
            box-shadow: 5px 0 15px rgba(0, 0, 0, 0.1);
            z-index: 50;
            transition: left 0.3s ease;
            border-radius: 20px 0 0 20px;
            display: flex;
            flex-direction: column;
        }

        .chat-history.active {
            left: 0;
        }

        .history-header {
            padding: 20px;
            background: linear-gradient(90deg, #ff7e5f, #feb47b);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .history-header h3 {
            font-size: 18px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .close-history {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.3s;
        }

        .close-history:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .history-list {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }

        .history-item {
            padding: 12px 15px;
            border-radius: 10px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.3s;
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
        }

        .history-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .history-item.active {
            background: linear-gradient(90deg, rgba(255, 126, 95, 0.1), rgba(254, 180, 123, 0.1));
            border-color: #ff7e5f;
        }

        .history-preview {
            font-size: 14px;
            color: #666;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            margin-bottom: 5px;
        }

        .history-time {
            font-size: 12px;
            color: #999;
            display: flex;
            justify-content: space-between;
        }

        .clear-history {
            padding: 15px;
            border-top: 1px solid #e0e0e0;
        }

        .clear-history-btn {
            width: 100%;
            padding: 10px;
            background: #ff7e5f;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .clear-history-btn:hover {
            background: #ff6b4a;
            transform: translateY(-2px);
        }

        .history-toggle {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-left: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .history-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .enhanced-answer {
            margin: 15px 0;
            padding: 15px;
            background: linear-gradient(135deg, rgba(255, 126, 95, 0.1), rgba(254, 180, 123, 0.1));
            border-radius: 10px;
            border-left: 4px solid #ff7e5f;
        }

        .answer-section {
            margin-bottom: 15px;
        }

        .answer-title {
            font-weight: 600;
            color: #1a2a6c;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .answer-list {
            list-style: none;
            padding-left: 20px;
        }

        .answer-list li {
            margin-bottom: 6px;
            position: relative;
            padding-left: 20px;
        }

        .answer-list li:before {
            content: "â€¢";
            color: #ff7e5f;
            font-weight: bold;
            position: absolute;
            left: 0;
        }

        .note-box {
            background: rgba(79, 172, 254, 0.1);
            border: 1px solid rgba(79, 172, 254, 0.3);
            border-radius: 8px;
            padding: 12px;
            margin: 10px 0;
            font-size: 14px;
            color: #1a2a6c;
        }

        .note-box i {
            color: #4facfe;
            margin-right: 8px;
        }

        .knowledge-tag {
            display: inline-block;
            background: rgba(255, 126, 95, 0.1);
            color: #ff7e5f;
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 12px;
            margin: 3px;
            border: 1px solid rgba(255, 126, 95, 0.3);
        }

        @media (max-width: 768px) {
            .chat-container {
                height: 95vh;
                border-radius: 15px;
            }
           
            .message-bubble {
                max-width: 85%;
            }
           
            .brand-name {
                font-size: 20px;
            }

            .suggestions {
                flex-direction: column;
            }
            
            .loading-bar {
                width: 250px;
            }

            .chat-history {
                width: 85%;
                left: -85%;
            }

            .settings-dropdown {
                width: 200px;
                right: -50px;
            }

            .message-us-btn span {
                display: none;
            }
            
            .message-us-btn {
                padding: 8px;
                width: 36px;
                height: 36px;
                justify-content: center;
            }
        }

        @media (max-width: 600px) {
            .header-actions {
                flex-wrap: wrap;
                justify-content: flex-end;
                gap: 5px;
            }
            
            .message-us-btn, .header-btn {
                margin-left: 5px;
                margin-bottom: 5px;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-logo">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTryYMGzMy67w29nF47tPjUC3HCipQOT_CLahwD11UzC9-rc90BdWRQ4RM&s" alt="Blaze AI Logo" id="loadingLogo">
        </div>
        <div class="loading-text">Blaze AI with OpenAI</div>
        <div class="loading-bar">
            <div class="loading-progress" id="loadingProgress"></div>
        </div>
    </div>

    <!-- API Key Modal -->
    <div class="api-modal" id="apiModal">
        <div class="api-modal-content">
            <h2><i class="fas fa-key"></i> OpenAI API Key Required</h2>
            <p>To use Blaze AI with OpenAI's powerful language model, please enter your OpenAI API key.</p>
            
            <div class="api-input-group">
                <label for="apiKeyInput"><i class="fas fa-key"></i> Your OpenAI API Key</label>
                <input type="password" id="apiKeyInput" class="api-input" placeholder="sk-...">
            </div>
            
            <div class="api-status" id="apiStatus"></div>
            
            <div class="api-modal-buttons">
                <button class="api-btn secondary" id="skipApiBtn">
                    <i class="fas fa-forward"></i> Use Basic Mode
                </button>
                <button class="api-btn primary" id="saveApiBtn">
                    <i class="fas fa-save"></i> Save & Continue
                </button>
            </div>
        </div>
    </div>

    <!-- Chat Container -->
    <div class="chat-container device-theme" id="chatContainer">
        <div class="brand-header">
            <div class="brand-left">
                <button class="history-toggle" id="historyToggle" title="Chat History">
                    <i class="fas fa-history"></i>
                </button>
                <div class="brand-logo">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTryYMGzMy67w29nF47tPjUC3HCipQOT_CLahwD11UzC9-rc90BdWRQ4RM&s" alt="Blaze AI Logo" id="headerLogo">
                </div>
                <div>
                    <div class="brand-name">Blaze AI</div>
                    <div class="brand-tagline">Powered by OpenAI</div>
                </div>
            </div>
            <div class="header-actions">
                <button class="message-us-btn" id="messageUsBtn" title="Message Us">
                    <i class="fas fa-comment-alt"></i>
                    <span>Message Us</span>
                </button>
                
                <button class="header-btn" title="API Settings" id="apiKeyBtn">
                    <i class="fas fa-key"></i>
                </button>
                
                <button class="header-btn" title="New Chat" id="newChatBtn">
                    <i class="fas fa-plus"></i>
                </button>
                <button class="header-btn" title="Audio Response" id="audioToggleBtn">
                    <i class="fas fa-volume-up"></i>
                </button>
                <button class="header-btn" title="Settings" id="settingsBtn">
                    <i class="fas fa-cog"></i>
                </button>
                
                <div class="settings-dropdown" id="settingsDropdown">
                    <h3><i class="fas fa-sliders-h"></i> Settings</h3>
                    
                    <div class="setting-item">
                        <label><i class="fas fa-volume-up"></i> Volume</label>
                        <input type="range" class="volume-slider" id="volumeSlider" min="0" max="1" step="0.1" value="0.8">
                    </div>
                    
                    <div class="setting-item">
                        <label><i class="fas fa-palette"></i> Theme</label>
                        <div class="theme-options">
                            <div class="theme-option device active" data-theme="device">
                                Device
                            </div>
                            <div class="theme-option white" data-theme="white">
                                White
                            </div>
                            <div class="theme-option black" data-theme="black">
                                Black
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
       
        <div class="chat-area" id="chatArea">
            <div class="welcome-message">
                Welcome to Blaze AI with OpenAI integration!
                <div style="margin-top: 10px;">
                    <span class="knowledge-tag" id="modelStatus">Basic Mode</span>
                    <span class="knowledge-tag">ChatGPT</span>
                    <span class="knowledge-tag">Code Generation</span>
                </div>
            </div>
           
            <div class="message bot-message">
                <div class="bot-avatar">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTryYMGzMy67w29nF47tPjUC3HCipQOT_CLahwD11UzC9-rc90BdWRQ4RM&s" alt="Blaze AI Avatar" id="botAvatar">
                </div>
                <div class="message-bubble">
                    <b>ðŸ§  Blaze AI:</b> Hello! I'm Blaze AI. 
                    
                    <div class="enhanced-answer">
                        <div class="answer-title">
                            <i class="fas fa-bolt"></i> Features
                        </div>
                        <ul class="answer-list">
                            <li>Ask me anything</li>
                            <li>Code generation</li>
                            <li>Voice input</li>
                            <li>Chat history</li>
                        </ul>
                    </div>
                    
                    <div class="note-box" id="apiNote">
                        <i class="fas fa-key"></i>
                        <strong>OpenAI API:</strong> Click the key icon to enter your API key for intelligent responses.
                    </div>
                   
                    <div class="suggestions">
                        <div class="suggestion-chip">What is artificial intelligence?</div>
                        <div class="suggestion-chip">Create a Python calculator</div>
                        <div class="suggestion-chip">Tell me about space</div>
                    </div>
                   
                    <div class="message-time" id="currentTime"></div>
                </div>
            </div>
           
            <div class="typing-indicator" id="typingIndicator">
                <div class="bot-avatar">
                    <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTryYMGzMy67w29nF47tPjUC3HCipQOT_CLahwD11UzC9-rc90BdWRQ4RM&s" alt="Blaze AI Avatar" id="typingAvatar">
                </div>
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>
        </div>
       
        <div class="input-area">
            <textarea class="message-input" id="messageInput" placeholder="Ask me anything!" rows="1"></textarea>
            <button class="send-button" id="sendButton">
                <i class="fas fa-paper-plane"></i>
            </button>
            <button class="voice-button" id="voiceButton">
                <i class="fas fa-microphone"></i>
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const loadingScreen = document.getElementById('loadingScreen');
            const loadingProgress = document.getElementById('loadingProgress');
            const chatContainer = document.getElementById('chatContainer');
            const chatArea = document.getElementById('chatArea');
            const messageInput = document.getElementById('messageInput');
            const sendButton = document.getElementById('sendButton');
            const voiceButton = document.getElementById('voiceButton');
            const audioToggleBtn = document.getElementById('audioToggleBtn');
            const typingIndicator = document.getElementById('typingIndicator');
            const newChatBtn = document.getElementById('newChatBtn');
            const settingsBtn = document.getElementById('settingsBtn');
            const settingsDropdown = document.getElementById('settingsDropdown');
            const volumeSlider = document.getElementById('volumeSlider');
            const themeOptions = document.querySelectorAll('.theme-option');
            const historyToggle = document.getElementById('historyToggle');
            const messageUsBtn = document.getElementById('messageUsBtn');
            const apiKeyBtn = document.getElementById('apiKeyBtn');
            const apiModal = document.getElementById('apiModal');
            const apiKeyInput = document.getElementById('apiKeyInput');
            const saveApiBtn = document.getElementById('saveApiBtn');
            const skipApiBtn = document.getElementById('skipApiBtn');
            const apiStatus = document.getElementById('apiStatus');
            const modelStatus = document.getElementById('modelStatus');
            const apiNote = document.getElementById('apiNote');
           
            let chatHistoryData = JSON.parse(localStorage.getItem('blazeChatHistory')) || [];
            let currentChatId = Date.now().toString();
            
            let recognizing = false;
            let recognition;
            let audioEnabled = false;
            let speechVolume = 0.8;
            let currentTheme = 'device';
            let openaiApiKey = localStorage.getItem('blazeOpenAIKey') || '';
            let usingOpenAI = false;
            
            const logoUrl = "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTryYMGzMy67w29nF47tPjUC3HCipQOT_CLahwD11UzC9-rc90BdWRQ4RM&s";
            document.getElementById('loadingLogo').src = logoUrl;
            document.getElementById('headerLogo').src = logoUrl;
            document.getElementById('botAvatar').src = logoUrl;
            document.getElementById('typingAvatar').src = logoUrl;
           
            let progress = 0;
            const loadingInterval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(loadingInterval);
                   
                    setTimeout(() => {
                        loadingScreen.classList.add('hidden');
                        checkAPIKey();
                    }, 500);
                }
                loadingProgress.style.width = `${progress}%`;
            }, 200);
           
            function checkAPIKey() {
                if (openaiApiKey && openaiApiKey.startsWith('sk-')) {
                    testOpenAIKey();
                } else {
                    setTimeout(() => {
                        apiModal.classList.add('show');
                    }, 300);
                }
            }
            
            async function testOpenAIKey() {
                if (!openaiApiKey || !openaiApiKey.startsWith('sk-')) {
                    return false;
                }
                
                try {
                    const response = await fetch('https://api.openai.com/v1/models', {
                        headers: {
                            'Authorization': `Bearer ${openaiApiKey}`,
                            'Content-Type': 'application/json'
                        }
                    });
                    
                    if (response.ok) {
                        usingOpenAI = true;
                        modelStatus.textContent = 'OpenAI Active';
                        modelStatus.style.background = 'rgba(76, 175, 80, 0.1)';
                        modelStatus.style.color = '#4caf50';
                        apiNote.style.display = 'none';
                        messageInput.placeholder = "Ask me anything! I'm powered by OpenAI.";
                        return true;
                    } else {
                        localStorage.removeItem('blazeOpenAIKey');
                        openaiApiKey = '';
                        usingOpenAI = false;
                        return false;
                    }
                } catch (error) {
                    usingOpenAI = false;
                    return false;
                }
            }
           
            document.getElementById('currentTime').textContent = getCurrentTime();
           
            function getCurrentTime() {
                const now = new Date();
                return `${now.getHours().toString().padStart(2, '0')}:${now.getMinutes().toString().padStart(2, '0')}`;
            }

            function calculateExpression(expression) {
                try {
                    const cleanExpr = expression
                        .replace(/[^-()\d/*+.]/g, '')
                        .replace(/Ã—/g, '*')
                        .replace(/Ã·/g, '/');
                    
                    if (!/^[-+*/0-9().\s]+$/.test(cleanExpr)) {
                        throw new Error('Invalid characters in expression');
                    }
                    
                    const result = Function(`"use strict"; return (${cleanExpr})`)();
                    
                    if (isNaN(result) || !isFinite(result)) {
                        throw new Error('Invalid calculation result');
                    }
                    
                    return {
                        success: true,
                        expression: expression,
                        result: result,
                        formattedResult: Number(result.toFixed(6))
                    };
                } catch (error) {
                    return {
                        success: false,
                        error: error.message
                    };
                }
            }
           
            function addMessage(message, isUser, links = null, calculation = null, code = null) {
                const messageDiv = document.createElement('div');
                messageDiv.className = isUser ? 'message user-message' : 'message bot-message';
               
                if (!isUser) {
                    const avatarDiv = document.createElement('div');
                    avatarDiv.className = 'bot-avatar';
                    const avatarImg = document.createElement('img');
                    avatarImg.src = logoUrl;
                    avatarImg.alt = 'Blaze AI Avatar';
                    avatarDiv.appendChild(avatarImg);
                    messageDiv.appendChild(avatarDiv);
                }
               
                const bubbleDiv = document.createElement('div');
                bubbleDiv.className = 'message-bubble';
               
                const messageText = document.createElement('div');
                messageText.innerHTML = message;
                bubbleDiv.appendChild(messageText);

                if (calculation && calculation.success) {
                    const calcDiv = document.createElement('div');
                    calcDiv.className = 'calculator-result';
                    
                    const calcExpression = document.createElement('div');
                    calcExpression.className = 'calculation';
                    calcExpression.textContent = `${calculation.expression} =`;
                    
                    const calcResult = document.createElement('div');
                    calcResult.className = 'result';
                    calcResult.textContent = calculation.formattedResult;
                    
                    calcDiv.appendChild(calcExpression);
                    calcDiv.appendChild(calcResult);
                    bubbleDiv.appendChild(calcDiv);
                }

                if (code) {
                    const codeDiv = document.createElement('div');
                    codeDiv.className = 'code-container';
                    
                    const codeHeader = document.createElement('div');
                    codeHeader.className = 'code-header';
                    
                    const codeLanguage = document.createElement('div');
                    codeLanguage.className = 'code-language';
                    codeLanguage.textContent = code.language || 'Code';
                    
                    const copyBtn = document.createElement('button');
                    copyBtn.className = 'code-copy-btn';
                    copyBtn.textContent = 'Copy';
                    copyBtn.addEventListener('click', function() {
                        navigator.clipboard.writeText(code.content);
                        copyBtn.textContent = 'Copied!';
                        copyBtn.classList.add('copied');
                        setTimeout(() => {
                            copyBtn.textContent = 'Copy';
                            copyBtn.classList.remove('copied');
                        }, 2000);
                    });
                    
                    codeHeader.appendChild(codeLanguage);
                    codeHeader.appendChild(copyBtn);
                    
                    const codeContent = document.createElement('pre');
                    codeContent.textContent = code.content;
                    
                    codeDiv.appendChild(codeHeader);
                    codeDiv.appendChild(codeContent);
                    bubbleDiv.appendChild(codeDiv);
                }
               
                if (!isUser) {
                    const actionsDiv = document.createElement('div');
                    actionsDiv.className = 'message-actions';
                   
                    const copyBtn = document.createElement('button');
                    copyBtn.className = 'action-btn';
                    copyBtn.innerHTML = '<i class="far fa-copy"></i> Copy';
                    copyBtn.addEventListener('click', function() {
                        let textToCopy = message;
                        if (calculation && calculation.success) {
                            textToCopy += `\n\nCalculation: ${calculation.expression} = ${calculation.formattedResult}`;
                        }
                        if (code) {
                            textToCopy += `\n\nCode:\n${code.content}`;
                        }
                        navigator.clipboard.writeText(textToCopy.replace(/<[^>]*>/g, ''));
                        copyBtn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                        setTimeout(() => {
                            copyBtn.innerHTML = '<i class="far fa-copy"></i> Copy';
                        }, 2000);
                    });
                   
                    const likeBtn = document.createElement('button');
                    likeBtn.className = 'action-btn';
                    likeBtn.innerHTML = '<i class="far fa-thumbs-up"></i> Helpful';
                    likeBtn.addEventListener('click', function() {
                        likeBtn.innerHTML = '<i class="fas fa-thumbs-up"></i> Thank you!';
                        setTimeout(() => {
                            likeBtn.innerHTML = '<i class="far fa-thumbs-up"></i> Helpful';
                        }, 2000);
                    });
                   
                    actionsDiv.appendChild(copyBtn);
                    actionsDiv.appendChild(likeBtn);
                    bubbleDiv.appendChild(actionsDiv);
                }
               
                const timeDiv = document.createElement('div');
                timeDiv.className = 'message-time';
                timeDiv.textContent = getCurrentTime();
               
                bubbleDiv.appendChild(timeDiv);
                messageDiv.appendChild(bubbleDiv);
               
                chatArea.insertBefore(messageDiv, typingIndicator);
                chatArea.scrollTop = chatArea.scrollHeight;
            }
           
            function saveChatHistory(userMessage, botResponse) {
                const chatItem = {
                    id: currentChatId,
                    userMessage: userMessage.substring(0, 100),
                    botResponse: botResponse.message.substring(0, 150).replace(/<[^>]*>/g, ''),
                    timestamp: Date.now(),
                    timeString: getCurrentTime()
                };
                
                const existingIndex = chatHistoryData.findIndex(item => item.id === currentChatId);
                
                if (existingIndex > -1) {
                    chatHistoryData[existingIndex] = chatItem;
                } else {
                    chatHistoryData.push(chatItem);
                }
                
                if (chatHistoryData.length > 50) {
                    chatHistoryData.shift();
                }
                
                localStorage.setItem('blazeChatHistory', JSON.stringify(chatHistoryData));
            }
           
            async function callOpenAI(prompt) {
                if (!usingOpenAI || !openaiApiKey) {
                    return null;
                }
                
                try {
                    const response = await fetch('https://api.openai.com/v1/chat/completions', {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${openaiApiKey}`,
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            model: 'gpt-3.5-turbo',
                            messages: [
                                { role: "system", content: "You are Blaze AI, a helpful assistant." },
                                { role: "user", content: prompt }
                            ],
                            temperature: 0.7,
                            max_tokens: 1000
                        })
                    });
                    
                    if (!response.ok) {
                        throw new Error(`API error: ${response.status}`);
                    }
                    
                    const data = await response.json();
                    return data.choices[0].message.content;
                    
                } catch (error) {
                    console.error('OpenAI error:', error);
                    return null;
                }
            }
            
            async function getEnhancedResponse(userMessage) {
                const queryLower = userMessage.toLowerCase();
                
                if (queryLower.includes('hello') || queryLower.includes('hi') || queryLower.includes('hey')) {
                    return {
                        message: `<b>ðŸ§  Blaze AI:</b> Hello! I'm Blaze AI. ${usingOpenAI ? 'I can help with any question!' : 'Enter your OpenAI API key for better responses.'}`,
                        links: null,
                        calculation: null,
                        code: null
                    };
                }
                
                if (usingOpenAI) {
                    const openaiResponse = await callOpenAI(userMessage);
                    if (openaiResponse) {
                        return {
                            message: `<b>ðŸ§  Blaze AI:</b> ${openaiResponse}`,
                            links: null,
                            calculation: null,
                            code: null
                        };
                    }
                }
                
                if (queryLower.includes('who made you')) {
                    return {
                        message: `<b>ðŸ§  Blaze AI:</b> I was created by <b>Richard Aveen</b> and <b>Aayush</b>!`,
                        links: null,
                        calculation: null,
                        code: null
                    };
                }
                
                if (queryLower.includes('thank')) {
                    return {
                        message: `<b>ðŸ§  Blaze AI:</b> You're welcome!`,
                        links: null,
                        calculation: null,
                        code: null
                    };
                }
                
                const calculationMatch = userMessage.match(/(?:calculate|compute|what is|solve)\s+(.+)/i) || 
                                       userMessage.match(/(\d+[\s\d+\-*/().Ã—Ã·]+)/);
                
                if (calculationMatch) {
                    const expression = calculationMatch[1] || calculationMatch[0];
                    const calculation = calculateExpression(expression);
                    
                    if (calculation.success) {
                        return {
                            message: `<b>ðŸ§  Blaze AI:</b> Calculation Result:`,
                            links: null,
                            calculation: calculation,
                            code: null
                        };
                    }
                }
                
                const responses = [
                    `<b>ðŸ§  Blaze AI:</b> I understand you're asking about "${userMessage}".`,
                    `<b>ðŸ§  Blaze AI:</b> That's an interesting question!`,
                ];
               
                return {
                    message: responses[Math.floor(Math.random() * responses.length)] + 
                            (usingOpenAI ? '' : '<br><div class="note-box"><i class="fas fa-key"></i> Add OpenAI API key for detailed answers</div>'),
                    links: null,
                    calculation: null,
                    code: null
                };
            }
            
            function speakResponse(text) {
                if (!audioEnabled) return;
                
                const plainText = text.replace(/<[^>]*>/g, '');
                
                if ('speechSynthesis' in window) {
                    window.speechSynthesis.cancel();
                    
                    const utterance = new SpeechSynthesisUtterance(plainText);
                    utterance.rate = 0.9;
                    utterance.pitch = 1;
                    utterance.volume = speechVolume;
                    
                    window.speechSynthesis.speak(utterance);
                }
            }
           
            async function sendMessage() {
                const message = messageInput.value.trim();
                if (message === '') return;
               
                addMessage(message, true);
                messageInput.value = '';
                messageInput.style.height = 'auto';
               
                typingIndicator.classList.add('active');
               
                try {
                    const botResponse = await getEnhancedResponse(message);
                    typingIndicator.classList.remove('active');
                    addMessage(botResponse.message, false, botResponse.links, botResponse.calculation, botResponse.code);
                    
                    saveChatHistory(message, botResponse);
                    
                    speakResponse(botResponse.message);
                } catch (error) {
                    typingIndicator.classList.remove('active');
                    addMessage("Sorry, I encountered an error.", false);
                }
            }
            
            function toggleListening() {
                if (recognizing) {
                    stopListening();
                } else {
                    startListening();
                }
            }
            
            function startListening() {
                if (!('webkitSpeechRecognition' in window)) {
                    alert("Your browser doesn't support voice recognition.");
                    return;
                }
                
                recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
                recognition.lang = 'en-US';
                recognition.continuous = false;
                recognition.interimResults = false;
                
                recognition.onstart = () => {
                    recognizing = true;
                    voiceButton.innerHTML = '<i class="fas fa-circle"></i>';
                    voiceButton.classList.add('listening');
                };
                
                recognition.onresult = (event) => {
                    const transcript = event.results[0][0].transcript;
                    messageInput.value = transcript;
                    sendMessage();
                };
                
                recognition.onerror = (e) => {
                    recognizing = false;
                    voiceButton.innerHTML = '<i class="fas fa-microphone"></i>';
                    voiceButton.classList.remove('listening');
                };
                
                recognition.onend = () => {
                    recognizing = false;
                    voiceButton.innerHTML = '<i class="fas fa-microphone"></i>';
                    voiceButton.classList.remove('listening');
                };
                
                recognition.start();
            }
            
            function stopListening() {
                if (recognition) {
                    recognition.stop();
                }
            }

            function toggleAudio() {
                audioEnabled = !audioEnabled;
                if (audioEnabled) {
                    audioToggleBtn.classList.add('active');
                    audioToggleBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
                } else {
                    audioToggleBtn.classList.remove('active');
                    audioToggleBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
                }
            }

            function toggleSettingsDropdown() {
                settingsDropdown.classList.toggle('show');
            }

            function changeTheme(theme) {
                currentTheme = theme;
                chatContainer.className = `chat-container ${theme}-theme`;
                
                themeOptions.forEach(option => {
                    option.classList.remove('active');
                    if (option.getAttribute('data-theme') === theme) {
                        option.classList.add('active');
                    }
                });
                
                localStorage.setItem('blazeTheme', theme);
            }

            async function saveApiKey() {
                const key = apiKeyInput.value.trim();
                
                if (!key.startsWith('sk-')) {
                    apiStatus.textContent = "Invalid API key format.";
                    apiStatus.className = "api-status error";
                    return;
                }
                
                apiStatus.textContent = "Testing API key...";
                apiStatus.className = "api-status";
                apiStatus.style.display = 'block';
                
                openaiApiKey = key;
                const testResult = await testOpenAIKey();
                
                if (testResult) {
                    localStorage.setItem('blazeOpenAIKey', key);
                    apiStatus.textContent = "API key saved successfully!";
                    apiStatus.className = "api-status success";
                    
                    setTimeout(() => {
                        apiModal.classList.remove('show');
                        chatContainer.classList.add('visible');
                    }, 1000);
                } else {
                    apiStatus.textContent = "Invalid API key.";
                    apiStatus.className = "api-status error";
                    openaiApiKey = '';
                }
            }

            function skipApiKey() {
                apiModal.classList.remove('show');
                chatContainer.classList.add('visible');
            }

            function goToMessageUs() {
                const messageUsHTML = `
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Message Us - Blaze AI</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .message-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            max-width: 500px;
            width: 100%;
        }
        
        .back-btn {
            background: #4facfe;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 20px;
        }
        
        h1 {
            color: #1a2a6c;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .contact-info {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border-left: 4px solid #ff7e5f;
        }
        
        .contact-item {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 20px 0;
            padding: 10px;
            border-radius: 10px;
        }
        
        .contact-item i {
            color: #ff7e5f;
            width: 24px;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div class="message-container">
        <button class="back-btn" onclick="window.history.back()">
            <i class="fas fa-arrow-left"></i> Back to Blaze AI
        </button>
        
        <h1><i class="fas fa-comment-alt"></i> Message Us</h1>
        <p>Get in touch with the Blaze AI team!</p>
        
        <div class="contact-info">
            <div class="contact-item">
                <i class="fas fa-users"></i>
                <div>
                    <strong>Creators</strong><br>
                    Richard Aveen & Aayush
                </div>
            </div>
        </div>
    </div>
</body>
</html>`;

                const newWindow = window.open();
                newWindow.document.write(messageUsHTML);
                newWindow.document.close();
            }

            const savedTheme = localStorage.getItem('blazeTheme') || 'device';
            changeTheme(savedTheme);

            const savedVolume = localStorage.getItem('blazeVolume');
            if (savedVolume) {
                speechVolume = parseFloat(savedVolume);
                volumeSlider.value = speechVolume;
            }

            if (openaiApiKey) {
                testOpenAIKey();
            }
           
            messageInput.addEventListener('input', function() {
                this.style.height = 'auto';
                this.style.height = (this.scrollHeight) + 'px';
            });
           
            sendButton.addEventListener('click', sendMessage);
            voiceButton.addEventListener('click', toggleListening);
            audioToggleBtn.addEventListener('click', toggleAudio);
            settingsBtn.addEventListener('click', toggleSettingsDropdown);
            apiKeyBtn.addEventListener('click', () => apiModal.classList.add('show'));
            messageUsBtn.addEventListener('click', goToMessageUs);
            saveApiBtn.addEventListener('click', saveApiKey);
            skipApiBtn.addEventListener('click', skipApiKey);
           
            apiModal.addEventListener('click', (e) => {
                if (e.target === apiModal) {
                    apiModal.classList.remove('show');
                    if (!chatContainer.classList.contains('visible')) {
                        chatContainer.classList.add('visible');
                    }
                }
            });
           
            messageInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && !e.shiftKey) {
                    e.preventDefault();
                    sendMessage();
                }
            });
           
            themeOptions.forEach(option => {
                option.addEventListener('click', function() {
                    const theme = this.getAttribute('data-theme');
                    changeTheme(theme);
                });
            });
           
            volumeSlider.addEventListener('input', function() {
                speechVolume = parseFloat(this.value);
                localStorage.setItem('blazeVolume', speechVolume);
            });
           
            newChatBtn.addEventListener('click', function() {
                const messages = chatArea.querySelectorAll('.message');
                messages.forEach(msg => {
                    if (msg !== messages[0]) {
                        msg.remove();
                    }
                });
               
                currentChatId = Date.now().toString();
               
                addMessage("Hello! I'm Blaze AI. How can I help you today?", false);
            });
           
            document.querySelectorAll('.suggestion-chip').forEach(chip => {
                chip.addEventListener('click', function() {
                    messageInput.value = this.textContent;
                    sendMessage();
                });
            });
           
            document.addEventListener('click', function(event) {
                if (!settingsBtn.contains(event.target) && !settingsDropdown.contains(event.target)) {
                    settingsDropdown.classList.remove('show');
                }
            });

            setTimeout(() => {
                messageInput.focus();
            }, 1000);
        });
    </script>
</body>
</html>