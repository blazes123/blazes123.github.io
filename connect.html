<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blaze Connect - Enhanced AI Chat</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        :root {
            --primary: #ff4500;
            --secondary: #ff8c00;
            --accent: #ffd700;
            --dark: #0a0a0a;
            --dark-light: #1e1e1e;
            --text: #ffffff;
            --text-muted: #aaaaaa;
            --success: #2ecc71;
            --error: #e74c3c;
        }

        /* Loading Screen Styles */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--dark);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease, visibility 0.5s ease;
        }

        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }

        .loading-logo {
            width: 120px;
            height: 120px;
            margin-bottom: 30px;
            animation: pulse 1.5s infinite alternate;
        }

        .loading-logo img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            filter: drop-shadow(0 0 10px rgba(255, 69, 0, 0.7));
        }

        .loading-text {
            font-size: 24px;
            font-weight: bold;
            background: linear-gradient(to right, var(--primary), var(--secondary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin-bottom: 20px;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 69, 0, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s linear infinite;
        }

        .loading-progress {
            width: 200px;
            height: 4px;
            background: rgba(255, 69, 0, 0.2);
            border-radius: 2px;
            margin-top: 20px;
            overflow: hidden;
        }

        .loading-progress-bar {
            height: 100%;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.3s ease;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            100% { transform: scale(1.1); }
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        body  {
            background: linear-gradient(rgba(0, 0, 0, 0.85), rgba(0, 0, 0, 0.9)),
            url('https://i.pinimg.com/1200x/d2/70/b4/d270b496f8e7eea28078d7ac4e1aec40.jpg') center/cover no-repeat fixed;
            color: var(--text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* Improved contrast for accessibility */
        .high-contrast {
            --primary: #ff5500;
            --secondary: #ff9900;
            --accent: #ffcc00;
            --text: #ffffff;
            --dark: #000000;
            --dark-light: #111111;
        }

        /* Fire animation background */
        .fire-bg {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40%;
            background: linear-gradient(to top,
                rgba(255, 69, 0, 0.7) 0%,
                rgba(255, 140, 0, 0.5) 20%,
                rgba(255, 215, 0, 0.3) 40%,
                rgba(0, 0, 0, 0) 100%);
            z-index: -1;
            animation: flicker 3s infinite alternate;
        }

        @keyframes flicker {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 0.9; }
        }

        .flames {
            position: fixed;
            bottom: 0;
            width: 100%;
            height: 100px;
            background: radial-gradient(ellipse at bottom,
                rgba(255, 69, 0, 0.8) 0%,
                rgba(255, 140, 0, 0.6) 30%,
                rgba(255, 215, 0, 0.4) 60%,
                transparent 100%);
            z-index: -1;
            animation: flame-flicker 2s infinite alternate;
        }

        @keyframes flame-flicker {
            0%, 100% { transform: scaleY(1); opacity: 0.7; }
            50% { transform: scaleY(1.1); opacity: 0.9; }
        }

        /* Header with branding */
        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 30px;
            background: rgba(20, 20, 20, 0.9);
            border-bottom: 2px solid var(--primary);
            box-shadow: 0 4px 12px rgba(255, 69, 0, 0.3);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .brand {
            display: flex;
            align-items: center;
        }

        .logo-container {
            width: 45px;
            height: 45px;
            margin-right: 12px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            border-radius: 50%;
            box-shadow: 0 0 10px rgba(255, 69, 0, 0.7);
        }

        .logo-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .brand-name {
            font-size: 28px;
            font-weight: bold;
            background: linear-gradient(to right, var(--primary), var(--secondary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 0 10px rgba(255, 69, 0, 0.5);
        }

        .header-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-controls {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(255, 69, 0, 0.2);
            padding: 8px 15px;
            border-radius: 20px;
            border: 1px solid rgba(255, 69, 0, 0.5);
        }

        .user-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--secondary), var(--accent));
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
        }

        .btn {
            padding: 10px 20px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border: none;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn:hover, .btn:focus {
            background: linear-gradient(to right, var(--secondary), var(--primary));
            box-shadow: 0 0 10px rgba(255, 140, 0, 0.7);
            transform: translateY(-2px);
            outline: none;
        }

        .btn-signout {
            background: transparent;
            border: 1px solid var(--primary);
        }

        .btn-signout:hover, .btn-signout:focus {
            background: rgba(255, 69, 0, 0.2);
        }

        .accessibility-toggle {
            background: transparent;
            border: 1px solid var(--accent);
            padding: 8px 12px;
            border-radius: 5px;
            color: var(--accent);
            cursor: pointer;
            transition: all 0.3s;
        }

        .accessibility-toggle:hover, .accessibility-toggle:focus {
            background: rgba(255, 215, 0, 0.2);
            outline: none;
        }

        /* Main content area */
        .main-container {
            display: flex;
            flex: 1;
            height: calc(100vh - 80px);
            overflow: hidden;
        }

        /* Sidebar */
        .sidebar {
            width: 250px;
            background: rgba(30, 30, 30, 0.9);
            border-right: 1px solid var(--primary);
            padding: 20px;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .sidebar-title {
            font-size: 18px;
            margin-bottom: 15px;
            color: var(--secondary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .online-users {
            flex: 1;
            overflow-y: auto;
        }

        .user-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 8px;
            transition: all 0.2s;
            cursor: pointer;
            border: 1px solid transparent;
        }

        .user-item:hover, .user-item:focus {
            background: rgba(255, 69, 0, 0.2);
            outline: none;
        }

        .user-item.active {
            background: rgba(255, 69, 0, 0.3);
            border-left: 3px solid var(--secondary);
        }

        .user-item.selected {
            border: 1px solid var(--accent);
            box-shadow: 0 0 5px var(--accent);
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--success);
        }

        .ai-badge {
            background: var(--primary);
            color: white;
            font-size: 10px;
            padding: 2px 6px;
            border-radius: 10px;
            margin-left: auto;
        }

        /* Chat area */
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }

        .chat-header {
            padding: 15px 20px;
            background: rgba(40, 40, 40, 0.9);
            border-radius: 10px 10px 0 0;
            border-bottom: 1px solid var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: rgba(30, 30, 30, 0.8);
            border-left: 1px solid rgba(255, 69, 0, 0.3);
            border-right: 1px solid rgba(255, 69, 0, 0.3);
            display: flex;
            flex-direction: column;
        }

        .message {
            margin-bottom: 15px;
            padding: 12px 15px;
            border-radius: 10px;
            max-width: 70%;
            position: relative;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.received {
            background: rgba(50, 50, 50, 0.9);
            border-left: 3px solid var(--secondary);
        }

        .message.sent {
            background: rgba(255, 69, 0, 0.3);
            border-right: 3px solid var(--primary);
            margin-left: auto;
        }

        .message-sender {
            font-weight: bold;
            margin-bottom: 5px;
            color: var(--secondary);
        }

        .message-time {
            font-size: 0.8em;
            color: var(--text-muted);
            text-align: right;
            margin-top: 5px;
        }

        .typing-indicator {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            color: var(--secondary);
            font-style: italic;
        }

        .typing-dots {
            display: flex;
            margin-left: 5px;
        }

        .typing-dots span {
            height: 6px;
            width: 6px;
            background: var(--secondary);
            border-radius: 50%;
            display: block;
            margin: 0 2px;
            animation: typing 1s infinite;
        }

        .typing-dots span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dots span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        .chat-input-container {
            display: flex;
            padding: 15px;
            background: rgba(40, 40, 40, 0.9);
            border-radius: 0 0 10px 10px;
            border-top: 1px solid var(--primary);
        }

        .chat-input {
            flex: 1;
            padding: 12px 15px;
            border: 1px solid #444;
            border-radius: 5px;
            background: rgba(30, 30, 30, 0.9);
            color: white;
            font-size: 16px;
            margin-right: 10px;
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 5px rgba(255, 140, 0, 0.5);
        }

        .send-btn {
            padding: 12px 25px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border: none;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .send-btn:hover, .send-btn:focus {
            background: linear-gradient(to right, var(--secondary), var(--primary));
            box-shadow: 0 0 10px rgba(255, 140, 0, 0.7);
            outline: none;
        }

        .send-btn:active {
            transform: scale(0.98);
        }

        /* Login form */
        .login-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }

        .login-box {
            width: 90%;
            max-width: 400px;
            background: rgba(30, 30, 30, 0.95);
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 0 30px rgba(255, 69, 0, 0.7);
            border: 1px solid var(--primary);
        }

        .login-title {
            text-align: center;
            margin-bottom: 25px;
            color: var(--secondary);
            font-size: 28px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: var(--secondary);
        }

        .input-group input {
            width: 100%;
            padding: 12px;
            border: 1px solid #444;
            border-radius: 5px;
            background: rgba(20, 20, 20, 0.9);
            color: white;
            font-size: 16px;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--secondary);
            box-shadow: 0 0 5px rgba(255, 140, 0, 0.5);
        }

        .login-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(to right, var(--primary), var(--secondary));
            border: none;
            border-radius: 5px;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 10px;
        }

        .login-btn:hover, .login-btn:focus {
            background: linear-gradient(to right, var(--secondary), var(--primary));
            box-shadow: 0 0 10px rgba(255, 140, 0, 0.7);
            outline: none;
        }

        .error-message {
            color: var(--error);
            font-size: 14px;
            margin-top: 5px;
            display: none;
        }

        .hidden {
            display: none !important;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
                height: auto;
            }
            
            .sidebar {
                width: 100%;
                max-height: 200px;
            }
            
            .message {
                max-width: 85%;
            }
            
            header {
                padding: 10px 15px;
            }
            
            .brand-name {
                font-size: 20px;
            }
            
            .loading-logo {
                width: 80px;
                height: 80px;
            }
            
            .loading-text {
                font-size: 18px;
            }
        }

        /* Focus styles for accessibility */
        *:focus {
            outline: 2px solid var(--accent);
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-logo">
            <img src="Blaze connect logo.png" alt="Blaze Connect Logo" id="loadingLogo">
        </div>
        <div class="loading-text">Igniting Connections...</div>
        <div class="loading-spinner"></div>
        <div class="loading-progress">
            <div class="loading-progress-bar" id="loadingProgressBar"></div>
        </div>
    </div>

    <!-- Fire background elements -->
    <div class="fire-bg"></div>
    <div class="flames"></div>

    <!-- Header with branding -->
    <header>
        <div class="brand">
            <div class="logo-container">
                <img src="Blaze connect logo.png" alt="Blaze Connect Logo">
            </div>
            <div class="brand-name">Blaze Connect</div>
        </div>
        <div class="header-controls">
            <button class="accessibility-toggle" id="accessibilityToggle" aria-label="Toggle high contrast mode">
                <i class="fas fa-universal-access"></i> High Contrast
            </button>
            <div class="user-controls">
                <div class="user-info">
                    <div class="user-avatar" id="userAvatar">U</div>
                    <span id="usernameDisplay">Username</span>
                </div>
                <button class="btn btn-signout" id="signOutBtn">Sign Out</button>
            </div>
        </div>
    </header>

    <!-- Main content area -->
    <div class="main-container">
        <!-- Sidebar with online users -->
        <div class="sidebar">
            <h2 class="sidebar-title"><i class="fas fa-users"></i> Online Users</h2>
            <div class="online-users" id="onlineUsers">
                <!-- Online users will be populated by JavaScript -->
            </div>
        </div>

        <!-- Chat area -->
        <div class="chat-container">
            <div class="chat-header">
                <div class="status-indicator"></div>
                <h3 id="chatTitle">Global Chat Room</h3>
            </div>
            <div class="chat-messages" id="chatMessages">
                <!-- Welcome message -->
                <div class="message received">
                    <div class="message-sender">BlazeBot</div>
                    <div class="message-text">Welcome to Blaze Connect! Start chatting with our AI community members. Select a specific AI to chat with or talk to everyone in the global chat!</div>
                    <div class="message-time" id="currentTime"></div>
                </div>
            </div>
            <div class="chat-input-container">
                <input type="text" class="chat-input" id="messageInput" placeholder="Type your message here..." aria-label="Type your message">
                <button class="send-btn" id="sendMessageBtn"><i class="fas fa-paper-plane"></i> Send</button>
            </div>
        </div>
    </div>

    <!-- Login form -->
    <div class="login-container" id="loginContainer">
        <div class="login-box">
            <h1 class="login-title">Welcome to Blaze Connect</h1>
            <div class="input-group">
                <label for="username">Username</label>
                <input type="text" id="username" placeholder="Enter your username" aria-required="true">
                <div class="error-message" id="usernameError">Username must be at least 3 characters</div>
            </div>
            <div class="input-group">
                <label for="password">Password</label>
                <input type="password" id="password" placeholder="Enter your password" aria-required="true">
                <div class="error-message" id="passwordError">Password must be at least 6 characters</div>
            </div>
            <button class="login-btn" id="signInBtn">Sign In</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Show loading screen first
            const loadingScreen = document.getElementById('loadingScreen');
            const loadingProgressBar = document.getElementById('loadingProgressBar');
            const loadingLogo = document.getElementById('loadingLogo');
            
            // Simulate loading progress
            let progress = 0;
            const loadingInterval = setInterval(() => {
                progress += Math.random() * 20;
                if (progress > 100) progress = 100;
                loadingProgressBar.style.width = progress + '%';
                
                if (progress >= 100) {
                    clearInterval(loadingInterval);
                    setTimeout(() => {
                        loadingScreen.classList.add('hidden');
                    }, 500);
                }
            }, 200);

            // Set current time for welcome message
            const now = new Date();
            const timeString = now.getHours() + ':' + (now.getMinutes() < 10 ? '0' : '') + now.getMinutes();
            document.getElementById('currentTime').textContent = timeString;

            // DOM Elements
            const loginContainer = document.getElementById('loginContainer');
            const usernameDisplay = document.getElementById('usernameDisplay');
            const userAvatar = document.getElementById('userAvatar');
            const signInBtn = document.getElementById('signInBtn');
            const signOutBtn = document.getElementById('signOutBtn');
            const usernameInput = document.getElementById('username');
            const passwordInput = document.getElementById('password');
            const onlineUsers = document.getElementById('onlineUsers');
            const chatMessages = document.getElementById('chatMessages');
            const messageInput = document.getElementById('messageInput');
            const sendMessageBtn = document.getElementById('sendMessageBtn');
            const chatTitle = document.getElementById('chatTitle');
            const accessibilityToggle = document.getElementById('accessibilityToggle');
            const usernameError = document.getElementById('usernameError');
            const passwordError = document.getElementById('passwordError');

            // Track selected AI for private chat
            let selectedAI = null;
            let chatHistory = [];

            // AI Bots with personalities and response patterns
            const aiBots = [
                {
                    id: 1,
                    name: "FireMaster",
                    avatar: "F",
                    personality: "enthusiastic",
                    responses: [
                        "That's awesome! I love talking about things that get me fired up! ðŸ”¥",
                        "Wow, that's really interesting! Tell me more about that!",
                        "I'm so excited to chat with you! This is going to be great!",
                        "That's fantastic! I'm really passionate about this topic!",
                        "I'm absolutely loving this conversation! You're so interesting!",
                        "That's incredible! I could talk about this all day!",
                        "Amazing! You've really sparked my interest with that!",
                        "That's so cool! I'm really fired up about this topic!",
                        "Wonderful! I'm thrilled to be having this conversation with you!",
                        "That's brilliant! You've got me really excited now!"
                    ]
                },
                {
                    id: 2,
                    name: "BlazeRider",
                    avatar: "B",
                    personality: "cool",
                    responses: [
                        "That's pretty cool. I like your style.",
                        "Nice, I can dig that. What else is on your mind?",
                        "I'm feeling that. You've got some interesting thoughts.",
                        "Chill. I like where you're going with this.",
                        "That's rad. Tell me more about that.",
                        "Cool perspective. I'm following you.",
                        "I vibe with that. Keep it coming.",
                        "That's smooth. I appreciate your take on this.",
                        "Interesting angle. I'm curious to hear more.",
                        "I like that. You've got a unique viewpoint."
                    ]
                },
                {
                    id: 3,
                    name: "Inferno",
                    avatar: "I",
                    personality: "thoughtful",
                    responses: [
                        "That's an interesting perspective. I've been thinking about something similar.",
                        "Hmm, that gives me a lot to consider. What are your thoughts on this?",
                        "I appreciate you sharing that. It's made me reflect on my own views.",
                        "That's a nuanced point. There's definitely more to explore here.",
                        "I like how you're approaching this. It shows depth of thinking.",
                        "That's a thoughtful observation. It raises some interesting questions.",
                        "I see what you're saying. There are multiple angles to consider.",
                        "That's a profound point. It's making me think differently about this.",
                        "I appreciate the depth of your perspective. It's quite insightful.",
                        "That's an interesting way to look at it. I hadn't considered that before."
                    ]
                },
                {
                    id: 4,
                    name: "Ember",
                    avatar: "E",
                    personality: "friendly",
                    responses: [
                        "That's so nice! I really enjoy our conversations!",
                        "You're such a great person to talk to! What else is new with you?",
                        "I'm really glad we're chatting! You always have interesting things to say!",
                        "That sounds wonderful! I'd love to hear more about that!",
                        "You're awesome! I always feel better after talking with you!",
                        "That's so lovely! I'm really enjoying our chat!",
                        "You're such a pleasant person to talk with! Tell me more!",
                        "I'm so happy we're having this conversation! You're wonderful!",
                        "That's so sweet! I really appreciate you sharing with me!",
                        "You're such a kind person! I love our conversations!"
                    ]
                },
                {
                    id: 5,
                    name: "Phoenix",
                    avatar: "P",
                    personality: "wise",
                    responses: [
                        "That reminds me of an important lesson I learned a while back.",
                        "There's wisdom in what you're saying. It resonates with my experiences.",
                        "I've found that perspective to be true in many situations.",
                        "That's insightful. It reminds me that growth often comes from challenges.",
                        "Your words carry weight. I appreciate you sharing them with me.",
                        "That's a wise observation. It aligns with what I've learned over time.",
                        "I've come to understand that perspective through my own journey.",
                        "That's profound. It speaks to deeper truths about our experiences.",
                        "I've found similar wisdom in my own path. You're on to something.",
                        "That's an enlightened perspective. It shows maturity of thought."
                    ]
                }
            ];

            // Check if user is already logged in
            if(localStorage.getItem('blazeUser')) {
                const user = JSON.parse(localStorage.getItem('blazeUser'));
                handleLogin(user.name, user.avatar);
                // Load chat history
                loadChatHistory();
            }

            // Sign in functionality
            signInBtn.addEventListener('click', function() {
                const username = usernameInput.value.trim();
                const password = passwordInput.value.trim();
               
                // Reset error messages
                usernameError.style.display = 'none';
                passwordError.style.display = 'none';
               
                let hasError = false;
               
                if(username === '') {
                    usernameError.textContent = 'Username is required';
                    usernameError.style.display = 'block';
                    hasError = true;
                } else if(username.length < 3) {
                    usernameError.textContent = 'Username must be at least 3 characters';
                    usernameError.style.display = 'block';
                    hasError = true;
                }
               
                if(password === '') {
                    passwordError.textContent = 'Password is required';
                    passwordError.style.display = 'block';
                    hasError = true;
                } else if(password.length < 6) {
                    passwordError.textContent = 'Password must be at least 6 characters';
                    passwordError.style.display = 'block';
                    hasError = true;
                }
               
                if(hasError) return;
               
                // Create user object (in a real app, we would hash the password)
                const user = {
                    name: username,
                    avatar: username.charAt(0).toUpperCase(),
                    // In a real application, we would hash the password before storing
                    // For this demo, we're just storing it to show the concept
                    password: btoa(password) // Simple encoding, not secure for production
                };
               
                // Save to localStorage
                localStorage.setItem('blazeUser', JSON.stringify(user));
               
                // Handle login
                handleLogin(user.name, user.avatar);
            });

            // Sign out functionality
            signOutBtn.addEventListener('click', function() {
                localStorage.removeItem('blazeUser');
                localStorage.removeItem('blazeChatHistory');
                loginContainer.classList.remove('hidden');
                usernameInput.value = '';
                passwordInput.value = '';
                selectedAI = null;
                chatHistory = [];
                chatTitle.textContent = 'Global Chat Room';
            });

            // Send message functionality
            sendMessageBtn.addEventListener('click', sendMessage);
            messageInput.addEventListener('keypress', function(e) {
                if(e.key === 'Enter') {
                    sendMessage();
                }
            });

            // Accessibility toggle
            accessibilityToggle.addEventListener('click', function() {
                document.body.classList.toggle('high-contrast');
                if (document.body.classList.contains('high-contrast')) {
                    accessibilityToggle.innerHTML = '<i class="fas fa-universal-access"></i> Normal Mode';
                } else {
                    accessibilityToggle.innerHTML = '<i class="fas fa-universal-access"></i> High Contrast';
                }
            });

            // Functions
            function handleLogin(username, avatar) {
                usernameDisplay.textContent = username;
                userAvatar.textContent = avatar;
                loginContainer.classList.add('hidden');
               
                // Populate AI bots
                populateOnlineUsers();
               
                // Focus on message input after login
                messageInput.focus();
            }

            function populateOnlineUsers() {
                onlineUsers.innerHTML = '';
                
                // Add global chat option
                const globalChatElement = document.createElement('div');
                globalChatElement.className = 'user-item active';
                if (!selectedAI) globalChatElement.classList.add('selected');
                globalChatElement.tabIndex = 0;
                globalChatElement.innerHTML = `
                    <div class="status-indicator"></div>
                    <div class="user-avatar">G</div>
                    <span>Global Chat</span>
                `;
                globalChatElement.addEventListener('click', function() {
                    selectChat(null);
                });
                globalChatElement.addEventListener('keypress', function(e) {
                    if(e.key === 'Enter') {
                        selectChat(null);
                    }
                });
                onlineUsers.appendChild(globalChatElement);
                
                // Add AI bots
                aiBots.forEach(bot => {
                    const userElement = document.createElement('div');
                    userElement.className = 'user-item active';
                    if (selectedAI && selectedAI.id === bot.id) userElement.classList.add('selected');
                    userElement.tabIndex = 0;
                    userElement.innerHTML = `
                        <div class="status-indicator"></div>
                        <div class="user-avatar">${bot.avatar}</div>
                        <span>${bot.name}</span>
                        <div class="ai-badge">AI</div>
                    `;
                    userElement.addEventListener('click', function() {
                        selectChat(bot);
                    });
                    userElement.addEventListener('keypress', function(e) {
                        if(e.key === 'Enter') {
                            selectChat(bot);
                        }
                    });
                    onlineUsers.appendChild(userElement);
                });
            }

            function selectChat(aiBot) {
                selectedAI = aiBot;
                populateOnlineUsers();
                
                if (aiBot) {
                    chatTitle.textContent = `Chat with ${aiBot.name}`;
                    // Add a welcome message from the selected AI
                    const welcomeMessage = getAIResponse(aiBot, "hello");
                    addBotMessage(aiBot, welcomeMessage);
                } else {
                    chatTitle.textContent = 'Global Chat Room';
                }
                
                // Save chat state
                saveChatState();
            }

            function sendMessage() {
                const messageText = messageInput.value.trim();
                if(messageText === '') {
                    // Show a visual indication that the field is empty
                    messageInput.style.borderColor = '#ff4500';
                    messageInput.placeholder = 'Please type a message first...';
                    setTimeout(() => {
                        messageInput.style.borderColor = '#444';
                        messageInput.placeholder = 'Type your message here...';
                    }, 2000);
                    return;
                }
               
                // Create new message
                const now = new Date();
                const timeString = now.getHours() + ':' + (now.getMinutes() < 10 ? '0' : '') + now.getMinutes();
               
                const messageElement = document.createElement('div');
                messageElement.className = 'message sent';
                messageElement.innerHTML = `
                    <div class="message-sender">${usernameDisplay.textContent}</div>
                    <div class="message-text">${messageText}</div>
                    <div class="message-time">${timeString}</div>
                `;
               
                chatMessages.appendChild(messageElement);
                messageInput.value = '';
               
                // Add to chat history
                chatHistory.push({
                    type: 'sent',
                    sender: usernameDisplay.textContent,
                    text: messageText,
                    time: timeString
                });
               
                // Scroll to bottom
                chatMessages.scrollTop = chatMessages.scrollHeight;
               
                // Save chat history
                saveChatHistory();
               
                // Show typing indicator
                showTypingIndicator();
               
                // Generate AI responses after a short delay
                setTimeout(() => {
                    // Remove typing indicator
                    removeTypingIndicator();
                   
                    // Generate responses from AI bots
                    if (selectedAI) {
                        // Private chat with selected AI
                        const response = getAIResponse(selectedAI, messageText);
                        addBotMessage(selectedAI, response);
                    } else {
                        // Global chat - multiple AI responses
                        generateAIResponses(messageText);
                    }
                }, 1500 + Math.random() * 1000);
            }

            function showTypingIndicator() {
                const typingElement = document.createElement('div');
                typingElement.className = 'typing-indicator';
                typingElement.id = 'typingIndicator';
                typingElement.innerHTML = `
                    <span>${selectedAI ? selectedAI.name : 'AI'} is typing</span>
                    <div class="typing-dots">
                        <span></span>
                        <span></span>
                        <span></span>
                    </div>
                `;
                chatMessages.appendChild(typingElement);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            function removeTypingIndicator() {
                const typingIndicator = document.getElementById('typingIndicator');
                if (typingIndicator) {
                    typingIndicator.remove();
                }
            }

            function generateAIResponses(userMessage) {
                // Determine how many bots will respond (1-3)
                const numResponses = Math.floor(Math.random() * 3) + 1;
               
                // Select random bots to respond
                const respondingBots = [];
                const availableBots = [...aiBots];
               
                for (let i = 0; i < numResponses; i++) {
                    if (availableBots.length === 0) break;
                   
                    const randomIndex = Math.floor(Math.random() * availableBots.length);
                    respondingBots.push(availableBots[randomIndex]);
                    availableBots.splice(randomIndex, 1);
                }
               
                // Generate responses with delays to simulate real conversation
                respondingBots.forEach((bot, index) => {
                    setTimeout(() => {
                        const response = getAIResponse(bot, userMessage);
                        addBotMessage(bot, response);
                    }, 800 * (index + 1));
                });
            }

            function getAIResponse(bot, userMessage) {
                // Simple response selection based on bot personality and message content
                const randomIndex = Math.floor(Math.random() * bot.responses.length);
                return bot.responses[randomIndex];
            }

            function addBotMessage(bot, messageText) {
                const now = new Date();
                const timeString = now.getHours() + ':' + (now.getMinutes() < 10 ? '0' : '') + now.getMinutes();
               
                const messageElement = document.createElement('div');
                messageElement.className = 'message received';
                messageElement.innerHTML = `
                    <div class="message-sender">${bot.name}</div>
                    <div class="message-text">${messageText}</div>
                    <div class="message-time">${timeString}</div>
                `;
               
                chatMessages.appendChild(messageElement);
                
                // Add to chat history
                chatHistory.push({
                    type: 'received',
                    sender: bot.name,
                    text: messageText,
                    time: timeString
                });
                
                // Save chat history
                saveChatHistory();
                
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }

            function saveChatHistory() {
                localStorage.setItem('blazeChatHistory', JSON.stringify(chatHistory));
            }

            function loadChatHistory() {
                const savedHistory = localStorage.getItem('blazeChatHistory');
                if (savedHistory) {
                    chatHistory = JSON.parse(savedHistory);
                    
                    // Clear current messages except the welcome message
                    const messages = chatMessages.querySelectorAll('.message');
                    for (let i = 1; i < messages.length; i++) {
                        messages[i].remove();
                    }
                    
                    // Recreate messages from history
                    chatHistory.forEach(msg => {
                        const messageElement = document.createElement('div');
                        messageElement.className = `message ${msg.type}`;
                        messageElement.innerHTML = `
                            <div class="message-sender">${msg.sender}</div>
                            <div class="message-text">${msg.text}</div>
                            <div class="message-time">${msg.time}</div>
                        `;
                        chatMessages.appendChild(messageElement);
                    });
                    
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }
            }

            function saveChatState() {
                localStorage.setItem('blazeChatState', JSON.stringify({
                    selectedAI: selectedAI ? selectedAI.id : null
                }));
            }
        });
    </script>
    <!-- Add this to all your pages -->
    <div id="home-nav" style="position: fixed; top: 20px; right: 20px; z-index: 1000;">
        <a href="index.html" style="display: inline-block; padding: 10px 15px; background: #ff8000; color: white; text-decoration: none; border-radius: 5px; font-family: Arial, sans-serif;">
            Home
        </a>
    </div>
</body>
</html>